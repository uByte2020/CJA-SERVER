(function(e){function t(t){for(var s,r,n=t[0],c=t[1],l=t[2],u=0,m=[];u<n.length;u++)r=n[u],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&m.push(i[r][0]),i[r]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(e[s]=c[s]);d&&d(t);while(m.length)m.shift()();return o.push.apply(o,l||[]),a()}function a(){for(var e,t=0;t<o.length;t++){for(var a=o[t],s=!0,n=1;n<a.length;n++){var c=a[n];0!==i[c]&&(s=!1)}s&&(o.splice(t--,1),e=r(r.s=a[0]))}return e}var s={},i={app:0},o=[];function r(t){if(s[t])return s[t].exports;var a=s[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=s,r.d=function(e,t,a){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)r.d(a,s,function(t){return e[t]}.bind(null,s));return a},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],c=n.push.bind(n);n.push=t,n=n.slice();for(var l=0;l<n.length;l++)t(n[l]);var d=c;o.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"0efd":function(e,t,a){"use strict";var s=a("cd1f"),i=a.n(s);i.a},2206:function(e,t,a){},"241b":function(e,t,a){"use strict";var s=a("64b5"),i=a.n(s);i.a},"2c5d":function(e,t,a){},3700:function(e,t,a){"use strict";var s=a("7d3a"),i=a.n(s);i.a},4424:function(e,t,a){e.exports=a.p+"img/login.7403af70.jpg"},4463:function(e,t,a){"use strict";var s=a("ff98"),i=a.n(s);i.a},"454e":function(e,t,a){"use strict";var s=a("8fde"),i=a.n(s);i.a},"4ba2":function(e,t,a){},"4d50":function(e,t,a){},5436:function(e,t,a){"use strict";var s=a("738c"),i=a.n(s);i.a},5538:function(e,t,a){"use strict";var s=a("2206"),i=a.n(s);i.a},"56d7":function(e,t,a){"use strict";a.r(t);a("96cf");var s=a("1da1"),i=(a("e623"),a("e379"),a("5dc8"),a("37e1"),a("2b0e")),o=a("8c4f"),r=a("bc3a"),n=a.n(r),c=a("a7fe"),l=a.n(c),d=(a("ab8b"),a("9062")),u=a.n(d),m=(a("e40d"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("router-view")}),p=[],f={},g=f,h=a("2877"),v=Object(h["a"])(g,m,p,!1,null,null,null),b=v.exports,y=(a("99af"),a("4de4"),a("d3b7"),a("2f62")),C=(a("caad"),a("2532"),{SUCCESS:"success",ERROR:"error",FAIL:"fail",INFO:"info",WARNING:"warning",DANGER:"danger"}),_={BASE_URL:"api/v1",DOMAIN:""},w={namespaced:!0,state:function(){return{isAuth:!1,user:null,users:[]}},mutations:{setUser:function(e,t){e.user=t},setUsers:function(e,t){e.users=t},setIsAuth:function(e,t){e.isAuth=t}},actions:{login:function(e,t){return new Promise((function(a,s){axios.post("".concat(_.BASE_URL,"/users/login"),t).then((function(t){e.commit("setUser",t.data.data.user),e.commit("setIsAuth",!0),e.commit("setResponse",{status:t.data.status},{root:!0});try{a(t.data)}catch(i){s(i)}})).catch((function(e){try{var t=e.response.data;s(t)}catch(t){s(e)}}))}))},logout:function(e){return new Promise((function(t,a){axios.get("".concat(_.BASE_URL,"/users/logout")).then((function(a){e.commit("setUser",null),e.commit("setUsers",[]),e.commit("setIsAuth",!1),commit("solicitacaoStore/freeModule",null,{root:!0}),commit("freeStore",null,{root:!0}),e.commit("setResponse",{status:a.data.status},{root:!0}),t(a.data)})).catch((function(t){e.commit("setResponse",{status:"error",message:"Loggout Error"},{root:!0}),a(t)}))}))},signup:function(e,t){return new Promise((function(a,s){axios.post("".concat(_.BASE_URL,"/users/signup"),t).then((function(t){e.commit("setUser",t.data.data.user),e.commit("setIsAuth",!0),e.commit("setResponse",{status:t.data.status},{root:!0}),a(t.data)})).catch((function(t){var a=t.response.data;e.commit("setResponse",{status:a.status,message:a.message},{root:!0}),s(a)}))}))},isLogged:function(e){return new Promise((function(t,a){axios.get("".concat(_.BASE_URL,"/users/isLogged")).then((function(s){e.commit("setUser",s.data.data.user),e.commit("setIsAuth",!0);try{t(s.data)}catch(i){a(i)}})).catch((function(e){try{var t=e.response.data;a(t)}catch(t){a(e)}}))}))},getUsers:function(e){if(e.state.user.role.perfilCode<=1)return new Promise((function(t,a){axios.get("".concat(_.BASE_URL,"/users")).then((function(a){e.commit("setUsers",a.data.data.docs),e.commit("setResponse",{status:a.data.status},{root:!0}),t(a.data)})).catch((function(t){var s=t.response.data;e.commit("setResponse",{status:s.status,message:s.message},{root:!0}),a(s)}))}))},updateMe:function(e,t){return console.log(t),new Promise((function(a,s){axios.patch("".concat(_.BASE_URL,"/users/updateMe"),t).then((function(t){e.commit("setUser",t.data.data.user),e.commit("setIsAuth",!0),e.commit("setResponse",{status:t.data.status},{root:!0}),a(t.data)})).catch((function(t){var a=t.response.data;e.commit("setResponse",{status:a.status,message:a.message},{root:!0}),s(a)}))}))},updateUser:function(e,t){return new Promise((function(a,s){axios.patch("".concat(_.BASE_URL,"/users/").concat(t._id),t).then((function(t){e.commit("setResponse",{status:t.data.status},{root:!0}),a(t.data)})).catch((function(t){var a=t.response.data;e.commit("setResponse",{status:a.status,message:a.message},{root:!0}),s(a)}))}))},changeBloqState:function(e,t){},getUserById:function(e,t){if(e.state.user.role.perfilCode<=1)return new Promise((function(e,a){axios.get("".concat(_.BASE_URL,"/users/").concat(t)).then((function(t){e(t.data)})).catch((function(e){var t=e.response.data;a(t)}))}))}},getters:{getUser:function(e){return e.user},getProfilePhoto:function(e){return"".concat(_.DOMAIN,"/img/users/").concat(e.user.photo)},getUserImgUrl:function(e){return"".concat(_.DOMAIN,"/img/users/")},getIsAuth:function(e){return e.isAuth},getUsers:function(e){return e.users.filter((function(e){return 0!==e.role.perfilCode}))},getMediadores:function(e){return e.users.filter((function(e){return 1===e.role.perfilCode}))},getClientes:function(e){return e.users.filter((function(e){return e.role.perfilCode>=2}))},countClientes:function(e){return e.users.filter((function(e){return e.role.perfilCode>=2})).length},getUserAuthPerfilCode:function(e){return e.user.role.perfilCode},restrictTo:function(e){return function(){for(var t=arguments.length,a=new Array(t),s=0;s<t;s++)a[s]=arguments[s];return a.includes(e.user.role.perfilCode)}}}},S=w,x=a("2909"),k={APOLICE:"apolice",COMPROVATIVO:"comprovativos",DOCIDENTICICACAO:"docIdentificacaos",SIMULACAO:"simulacao"},$={namespaced:!0,state:function(){return{solicitacoes:[],solicitacao:{}}},mutations:{setSolicitacoes:function(e,t){e.solicitacoes=t},setSolicitacao:function(e,t){e.solicitacao=t},freeModule:function(e,t){e.solicitacao={},e.solicitacoes=[]}},actions:{setSolicitacao:function(e,t){e.commit("setSolicitacao",t)},getSolicitacoes:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var a,s,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.rootState.userStore.user.role.perfilCode,s="",a>=2&&(s="/mySolicitacoes"),e.next=5,axios.get("".concat(_.BASE_URL,"/solicitacoes/").concat(s));case 5:i=e.sent,i.data.status===C.SUCCESS&&t.commit("setSolicitacoes",i.data.data.docs);case 7:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),cancelarSolicitacao:function(e,t){return new Promise((function(e,a){axios.patch("".concat(_.BASE_URL,"/solicitacoes/cancelar/").concat(t._id),t).then((function(t){e(t.data)})).catch((function(e){var t=e.response.data;a(t)}))}))},getSolicitacoesById:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t,a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,t){axios.get("".concat(_.BASE_URL,"/solicitacoes/").concat(a)).then((function(t){e(t.data)})).catch((function(e){var a=e.response.data;t(a)}))})));case 1:case"end":return e.stop()}}),e)})));function t(t,a){return e.apply(this,arguments)}return t}()},getters:{getSolicitacoes:function(e){var t=Object(x["a"])(e.solicitacoes.filter((function(e){return[1,2,3].includes(e.estado.estadoCode)})));return t.sort((function(e,t){return 2===e.estado.estadoCode?-1:2===t.estado.estadoCode?1:e.estado.estadoCode-t.estado.estadoCode}))},countSolicitacoesPendentes:function(e){return e.solicitacoes.filter((function(e){return 2===e.estado.estadoCode})).length},countSolicitacoesAtendidas:function(e){return e.solicitacoes.filter((function(e){return 1===e.estado.estadoCode})).length},countSolicitacoesCaducadas:function(e){return e.solicitacoes.filter((function(e){return 3===e.estado.estadoCode})).length},getSolicitacao:function(e){return e.solicitacao},getFileURL:function(e){return function(e){switch(e){case k.APOLICE:return"".concat(_.DOMAIN,"/files/seguros/apolice/");case k.COMPROVATIVO:return"".concat(_.DOMAIN,"/files/seguros/comprovativos/");case k.DOCIDENTICICACAO:return"".concat(_.DOMAIN,"/files/seguros/docIdentificacaos/");case k.SIMULACAO:return"".concat(_.DOMAIN,"/files/seguros/simulacao/")}}}}},A=$,R={namespaced:!0,state:function(){return{seguro:{}}},mutations:{setSeguro:function(e,t){e.seguro=t}},actions:{updateSeguro:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t,a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,s){axios.patch("".concat(_.BASE_URL,"/seguros/").concat(a.get("_id")),a).then((function(t){e(t.data)})).catch((function(e){var a=e.response.data;t.commit("setResponse",{status:a.status,message:a.message},{root:!0}),s(a)}))})));case 1:case"end":return e.stop()}}),e)})));function t(t,a){return e.apply(this,arguments)}return t}(),solicitarSeguro:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t,a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,s){axios.post("".concat(_.BASE_URL,"/seguros"),a).then((function(t){e(t.data)})).catch((function(e){var a=e.response.data;t.commit("setResponse",{status:a.status,message:a.message},{root:!0}),s(a)}))})));case 1:case"end":return e.stop()}}),e)})));function t(t,a){return e.apply(this,arguments)}return t}()},getters:{getSeguro:function(e){return e.seguro}}},D=R,P={namespaced:!0,state:function(){return{simulacaoViagem:[]}},mutations:{setSimulacaoViagem:function(e,t){e.simulacaoViagem=t}},actions:{simularSeguroViagem:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t,a){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,axios.post("".concat(_.BASE_URL,"/seguros/viagens/simular"),a);case 2:s=e.sent,s.data.status===C.SUCCESS&&t.commit("setSimulacaoViagem",s.data.data.precos);case 4:case"end":return e.stop()}}),e)})));function t(t,a){return e.apply(this,arguments)}return t}(),solicitarSeguroViagem:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t,a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,s){axios.post("".concat(_.BASE_URL,"/seguros/viagens"),a).then((function(t){e(t.data)})).catch((function(e){var a=e.response.data;t.commit("setResponse",{status:a.status,message:a.message},{root:!0}),s(a)}))})));case 1:case"end":return e.stop()}}),e)})));function t(t,a){return e.apply(this,arguments)}return t}()},getters:{getSimulacaoViagem:function(e){return e.simulacaoViagem}}},O=P;i["default"].use(y["a"]);var I=new y["a"].Store({strict:!0,modules:{userStore:S,solicitacaoStore:A,seguroStore:D,seguroViagemStore:O},state:function(){return{perfils:[],modalidades:[],seguradoras:[],planos:[],response:null}},mutations:{setPerfils:function(e,t){e.perfils=t},setModalidades:function(e,t){e.modalidades=t},setSeguradoras:function(e,t){e.seguradoras=t},setResponse:function(e,t){e.response=t},setPlanos:function(e,t){e.planos=t},freeStore:function(e,t){e.perfils=[],e.modalidades=[],e.seguradoras=[],e.response=null,e.planos=[]}},actions:{getPerfils:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,axios.get("".concat(_.BASE_URL,"/perfils"));case 2:a=e.sent,a.data.status===C.SUCCESS&&t.commit("setPerfils",a.data.data.docs);case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),getSeguradoras:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,axios.get("".concat(_.BASE_URL,"/seguradoras"));case 2:a=e.sent,a.data.status===C.SUCCESS&&t.commit("setSeguradoras",a.data.data.docs);case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),getModalidades:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,axios.get("".concat(_.BASE_URL,"/modalidades"));case 2:a=e.sent,a.data.status===C.SUCCESS&&t.commit("setModalidades",a.data.data.docs);case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),getPlanos:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,axios.get("".concat(_.BASE_URL,"/seguros/viagens/planos"));case 2:a=e.sent,a.data.status===C.SUCCESS&&t.commit("setPlanos",a.data.data.docs);case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),solicitar:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t,a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,s){axios.post("".concat(_.BASE_URL,"/solicitacoes"),a).then((function(t){e(t.data)})).catch((function(e){var a=e.response.data;t.commit("setResponse",{status:a.status,message:a.message},{root:!0}),s(a)}))})));case 1:case"end":return e.stop()}}),e)})));function t(t,a){return e.apply(this,arguments)}return t}(),updateSolicitacao:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t,a){var s,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s=a._id,i=a.estado,e.abrupt("return",new Promise((function(e,a){axios.patch("".concat(_.BASE_URL,"/solicitacoes/").concat(s),{estado:i}).then((function(t){e(t.data)})).catch((function(e){var s=e.response.data;t.commit("setResponse",{status:s.status,message:s.message},{root:!0}),a(s)}))})));case 2:case"end":return e.stop()}}),e)})));function t(t,a){return e.apply(this,arguments)}return t}()},getters:{getPerfils:function(e){return e.perfils.filter((function(e){return 0!==e.perfilCode}))},getSeguradoras:function(e){return e.seguradoras},getModalidades:function(e){return e.modalidades},getPlanos:function(e){return e.planos}}}),V=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper",class:{"nav-open":e.$sidebar.showSidebar}},[a("notifications"),a("side-bar",{attrs:{"sidebar-item-color":e.sidebarBackground,"sidebar-background-image":e.sidebarBackgroundImage}},[a("mobile-menu",{attrs:{slot:"content"},slot:"content"}),a("sidebar-link",{directives:[{name:"show",rawName:"v-show",value:e.restrictTo(0,1),expression:"restrictTo(0, 1)"}],attrs:{to:"/dashboard"}},[a("md-icon",[e._v("dashboard")]),a("p",[e._v("Dashboard")])],1),a("sidebar-link",{attrs:{to:"/solicitacoes"}},[a("md-icon",[e._v("notifications")]),a("p",[e._v("Solicitações")])],1),a("sidebar-link",{directives:[{name:"show",rawName:"v-show",value:e.restrictTo(2,3),expression:"restrictTo(2, 3)"}],attrs:{to:"/simular-seguro"}},[a("md-icon",[e._v("bubble_chart")]),a("p",[e._v("Simulacao")])],1),a("sidebar-link",{directives:[{name:"show",rawName:"v-show",value:e.restrictTo(0),expression:"restrictTo(0)"}],attrs:{to:"/users"}},[a("md-icon",[e._v("group")]),a("p",[e._v("Utilizadores")])],1),a("sidebar-link",{attrs:{to:"/user"}},[a("md-icon",[e._v("person")]),a("p",[e._v("Perfil")])],1)],1),a("div",{staticClass:"main-panel"},[a("top-navbar"),a("dashboard-content"),e.$route.meta.hideFooter?e._e():a("content-footer")],1)],1)},z=[],U=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("md-toolbar",{staticClass:"md-transparent",attrs:{"md-elevation":"0"}},[a("div",{staticClass:"md-toolbar-row"},[a("div",{staticClass:"md-toolbar-section-start"}),a("div",{staticClass:"md-toolbar-section-end"},[a("md-button",{staticClass:"md-just-icon md-simple md-toolbar-toggle",class:{toggled:e.$sidebar.showSidebar},on:{click:e.toggleSidebar}},[a("span",{staticClass:"icon-bar"}),a("span",{staticClass:"icon-bar"}),a("span",{staticClass:"icon-bar"})]),a("div",{staticClass:"md-collapse"},[a("md-list",[a("md-list-item",{attrs:{href:"#"},on:{click:function(t){return e.profilePage()}}},[a("i",{staticClass:"material-icons"},[e._v("person")]),a("p",{staticClass:"hidden-lg hidden-md"},[e._v("Profile")])]),a("md-list-item",{attrs:{href:"#/logout"},on:{click:function(t){return e.logout()}}},[a("a",[e._v("Sair")])])],1)],1)],1)])])},E=[],j={data:function(){return{selectedEmployee:null,employees:["Jim Halpert","Dwight Schrute","Michael Scott","Pam Beesly","Angela Martin","Kelly Kapoor","Ryan Howard","Kevin Malone"]}},methods:{toggleSidebar:function(){this.$sidebar.displaySidebar(!this.$sidebar.showSidebar)},logout:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch("userStore/logout");case 3:t.sent,t.next=8;break;case 6:t.prev=6,t.t0=t["catch"](0);case 8:e.$router.push({path:"/login"});case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))()},profilePage:function(){this.$router.push({path:"/user"})}}},N=j,T=Object(h["a"])(N,U,E,!1,null,null,null),B=T.exports,M=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("footer",{staticClass:"footer"},[a("div",{staticClass:"container"},[a("div",{staticClass:"copyright text-center"},[e._v(" © "+e._s((new Date).getFullYear())+" Powered by uByte ")])])])},q=[],L={},F=L,G=Object(h["a"])(F,M,q,!1,null,null,null),H=G.exports,K=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("transition",{attrs:{name:"fade",mode:"out-in"}},[a("router-view")],1)},J=[],W={},Y=W,Z=(a("5436"),Object(h["a"])(Y,K,J,!1,null,null,null)),Q=Z.exports,X=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ul",{staticClass:"nav nav-mobile-menu"},[a("li",[a("a",{attrs:{href:"#/logout"},on:{click:function(t){return e.logout()}}},[a("i",{staticClass:"material-icons"},[e._v("person")]),a("p",[e._v("Sair")])])])])},ee=[],te={data:function(){return{search:null,selectedEmployee:null,employees:["Jim Halpert","Dwight Schrute","Michael Scott","Pam Beesly","Angela Martin","Kelly Kapoor","Ryan Howard","Kevin Malone"]}},methods:{logout:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch("userStore/logout");case 3:t.sent,t.next=8;break;case 6:t.prev=6,t.t0=t["catch"](0);case 8:e.$router.push({path:"/login"});case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))()}}},ae=te,se=Object(h["a"])(ae,X,ee,!1,null,null,null),ie=se.exports,oe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:e.closeDropDown,expression:"closeDropDown"}],staticClass:"fixed-plugin"},[a("div",{staticClass:"dropdown show-dropdown",class:{show:e.isOpen}},[a("a",{attrs:{"data-toggle":"dropdown"}},[a("i",{staticClass:"fa fa-cog fa-2x",on:{click:e.toggleDropDown}})]),a("ul",{staticClass:"dropdown-menu",class:{show:e.isOpen}},[a("li",{staticClass:"header-title"},[e._v("Sidebar Filters")]),a("li",{staticClass:"adjustments-line text-center"},e._l(e.sidebarColors,(function(t){return a("span",{key:t.color,staticClass:"badge filter",class:["badge-"+t.color,{active:t.active}],attrs:{"data-color":t.color},on:{click:function(a){return e.changeSidebarBackground(t)}}})})),0),a("li",{staticClass:"header-title"},[e._v("Images")]),e._l(e.sidebarImages,(function(t){return a("li",{key:t.image,class:{active:t.active},on:{click:function(a){return e.changeSidebarImage(t)}}},[a("a",{staticClass:"img-holder switch-trigger"},[a("img",{attrs:{src:t.image,alt:""}})])])})),a("li",{staticClass:"button-container"},[a("div",{},[a("md-button",{staticClass:"md-success md-block",attrs:{href:e.freeUrl,target:"_blank"}},[e._v("Free Download")])],1)]),a("li",{staticClass:"button-container"},[a("div",{},[a("md-button",{staticClass:"md-block md-primary",attrs:{href:e.documentationLink,target:"_blank"}},[e._v("Documentation")])],1)]),a("li",{staticClass:"header-title d-flex justify-content-center"},[e._v(" Thank you for sharing! ")]),a("li",{staticClass:"button-container"},[a("social-sharing",{attrs:{url:e.shareUrl,title:"Vue Material Dashboard - Admin Template for Vue.js",hashtags:"vuejs, dashboard, vuematerial","twitter-user":"creativetim"},inlineTemplate:{render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"centered-buttons"},[a("network",{staticClass:"md-button md-round md-just-icon md-facebook",attrs:{network:"facebook"}},[a("i",{staticClass:"fab fa-facebook-f"})]),a("network",{staticClass:"md-button md-round md-just-icon md-twitter",attrs:{network:"twitter"}},[a("i",{staticClass:"fab fa-twitter"})])],1)},staticRenderFns:[]}})],1),a("li",{staticClass:"github-buttons"},[a("gh-btns-star",{attrs:{slug:"creativetimofficial/vue-material-dashboard","show-count":""}})],1)],2)])])},re=[],ne=(a("4160"),a("159b"),a("5299")),ce=a.n(ne),le=a("f676");a("3a06");i["default"].use(ce.a),i["default"].use(le["a"],{useCache:!0});var de={data:function(){return{documentationLink:"https://creativetimofficial.github.io/vue-material-dashboard/documentation",shareUrl:"https://www.creative-tim.com/product/vue-material-dashboard",buyUrl:"",freeUrl:"https://www.creative-tim.com/product/vue-material-dashboard",isOpen:!1,sidebarColors:[{color:"purple",active:!1},{color:"blue",active:!1},{color:"green",active:!0},{color:"orange",active:!1},{color:"red",active:!1}],sidebarImages:[{image:a("7d6d"),active:!1},{image:a("9524"),active:!0},{image:a("aeef"),active:!1},{image:a("eb9e"),active:!1}]}},methods:{toggleDropDown:function(){this.isOpen=!this.isOpen},closeDropDown:function(){this.isOpen=!1},toggleList:function(e,t){e.forEach((function(e){e.active=!1})),t.active=!0},updateValue:function(e,t){console.log(e),this.$emit("update:".concat(e),t)},changeSidebarBackground:function(e){this.$emit("update:color",e.color),this.toggleList(this.sidebarColors,e)},changeSidebarImage:function(e){this.$emit("update:image",e.image),this.toggleList(this.sidebarImages,e)}}},ue=de,me=(a("dac3"),Object(h["a"])(ue,oe,re,!1,null,null,null)),pe=(me.exports,{components:{TopNavbar:B,DashboardContent:Q,ContentFooter:H,MobileMenu:ie},data:function(){return{sidebarBackground:"green",sidebarBackgroundImage:a("9524")}},mounted:function(){var e=this,t=this.$loading.show({color:"#4caf50",opacity:.3});Object(s["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,e.fetchSolicitacoes();case 2:if(!e.restrictTo(0,1)){a.next=5;break}return a.next=5,e.fetchUsers();case 5:return a.next=7,e.fetchSeguradoras();case 7:return a.next=9,e.fetchModalidades();case 9:return a.next=11,e.fetchPlanos();case 11:t.hide();case 12:case"end":return a.stop()}}),a)})))()},methods:{fetchSolicitacoes:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch("solicitacaoStore/getSolicitacoes");case 3:t.next=8;break;case 5:t.prev=5,t.t0=t["catch"](0),e.notifyVue(status.DANGER,t.t0.message);case 8:case"end":return t.stop()}}),t,null,[[0,5]])})))()},fetchUsers:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch("userStore/getUsers");case 3:t.next=8;break;case 5:t.prev=5,t.t0=t["catch"](0),e.notifyVue(status.DANGER,t.t0.message);case 8:case"end":return t.stop()}}),t,null,[[0,5]])})))()},fetchSeguradoras:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch("getSeguradoras");case 3:t.next=8;break;case 5:t.prev=5,t.t0=t["catch"](0),e.notifyVue(status.WARNING,t.t0.message);case 8:case"end":return t.stop()}}),t,null,[[0,5]])})))()},fetchModalidades:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch("getModalidades");case 3:t.next=8;break;case 5:t.prev=5,t.t0=t["catch"](0),e.notifyVue(status.WARNING,t.t0.message);case 8:case"end":return t.stop()}}),t,null,[[0,5]])})))()},fetchPlanos:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch("getPlanos");case 3:t.next=8;break;case 5:t.prev=5,t.t0=t["catch"](0),e.notifyVue(status.WARNING,t.t0.message);case 8:case"end":return t.stop()}}),t,null,[[0,5]])})))()}},computed:{restrictTo:function(){return this.$store.getters["userStore/restrictTo"]}}}),fe=pe,ge=Object(h["a"])(fe,V,z,!1,null,null,null),he=ge.exports,ve=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content"},[a("notifications"),a("div",{staticClass:"md-layout"},[a("div",{staticClass:"md-layout-item md-medium-size-50 md-xsmall-size-100 md-size-25"},[a("stats-card",{attrs:{"data-background-color":"green"}},[a("template",{slot:"header"},[a("md-icon",[e._v("notifications")])],1),a("template",{slot:"content"},[a("p",{staticClass:"category"},[e._v("Solicitações Atendidas")]),a("h3",{staticClass:"title"},[e._v(e._s(e.countSolicitacoesAtendidas))])]),a("template",{slot:"footer"},[a("div",{staticClass:"stats"})])],2)],1),a("div",{staticClass:"md-layout-item md-medium-size-50 md-xsmall-size-100 md-size-25"},[a("stats-card",{attrs:{"data-background-color":"orange"}},[a("template",{slot:"header"},[a("md-icon",[e._v("add_alert")])],1),a("template",{slot:"content"},[a("p",{staticClass:"category"},[e._v("Solicitações Pendentes")]),a("h3",{staticClass:"title"},[e._v(e._s(e.countSolicitacoesPendentes))])]),a("template",{slot:"footer"},[a("div",{staticClass:"stats"})])],2)],1),a("div",{staticClass:"md-layout-item md-medium-size-50 md-xsmall-size-100 md-size-25"},[a("stats-card",{attrs:{"data-background-color":"red"}},[a("template",{slot:"header"},[a("md-icon",[e._v("notification_important")])],1),a("template",{slot:"content"},[a("p",{staticClass:"category"},[e._v("Solicitações Caducadas")]),a("h3",{staticClass:"title"},[e._v(e._s(e.countSolicitacoesCaducadas))])]),a("template",{slot:"footer"},[a("div",{staticClass:"stats"})])],2)],1),a("div",{staticClass:"md-layout-item md-medium-size-50 md-xsmall-size-100 md-size-25"},[a("stats-card",{attrs:{"data-background-color":"blue"}},[a("template",{slot:"header"},[a("md-icon",[e._v("emoji_people")])],1),a("template",{slot:"content"},[a("p",{staticClass:"category"},[e._v("Utilizadores Clientes")]),a("h3",{staticClass:"title"},[e._v(e._s(e.countClientes))])]),a("template",{slot:"footer"},[a("div",{staticClass:"stats"})])],2)],1),a("div",{staticClass:"md-layout-item md-medium-size-100 md-xsmall-size-100 md-size-50"},[a("md-card",[a("md-card-header",{attrs:{"data-background-color":"orange"}},[a("h4",{staticClass:"title"},[e._v("Novos Utilizadores")]),a("p",{staticClass:"category"},[e._v("Utilizadores Recentemente Registrados")])]),a("md-card-content",[a("ordered-table",{attrs:{users:e.getNewUsers,"table-header-color":"orange"}})],1)],1)],1),a("div",{staticClass:"md-layout-item md-medium-size-100 md-xsmall-size-100 md-size-50"},[a("nav-tabs-card",[a("template",{slot:"content"},[a("md-tabs",{staticClass:"md-success",attrs:{"md-alignment":"left"}},[a("md-tab",{attrs:{id:"tab-pages","md-label":"Seguradoras"}},[a("nav-tabs-table",{attrs:{items:e.getSeguradoras,proprierty:"seguradora"}})],1),a("md-tab",{attrs:{id:"tab-posts","md-label":"Modalidades"}},[a("nav-tabs-table",{attrs:{items:e.getModalidades,proprierty:"modalidade"}})],1)],1)],1)],2)],1)])],1)},be=[],ye=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("md-card",[a("md-card-header",{staticClass:"card-chart",attrs:{"data-background-color":e.dataBackgroundColor}},[a("div",{staticClass:"ct-chart",attrs:{id:e.chartId}})]),a("md-card-content",[e._t("content")],2),a("md-card-actions",{attrs:{"md-alignment":"left"}},[e._t("footer")],2)],1)},Ce=[],_e=(a("25f0"),{name:"chart-card",props:{footerText:{type:String,default:""},headerTitle:{type:String,default:"Chart title"},chartType:{type:String,default:"Line"},chartOptions:{type:Object,default:function(){return{}}},chartResponsiveOptions:{type:Array,default:function(){return[]}},chartData:{type:Object,default:function(){return{labels:[],series:[]}}},dataBackgroundColor:{type:String,default:""}},data:function(){return{chartId:"no-id"}},methods:{initChart:function(e){var t="#".concat(this.chartId);e[this.chartType](t,this.chartData,this.chartOptions)},updateChartId:function(){var e=(new Date).getTime().toString(),t=this.getRandomInt(0,e);this.chartId="div_".concat(t)},getRandomInt:function(e,t){return Math.floor(Math.random()*(t-e+1))+e}},mounted:function(){var e=this;this.updateChartId(),Promise.resolve().then(a.t.bind(null,"ba48",7)).then((function(t){var a=t.default||t;e.$nextTick((function(){e.initChart(a)}))}))}}),we=_e,Se=Object(h["a"])(we,ye,Ce,!1,null,null,null),xe=(Se.exports,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("md-card",{staticClass:"md-card-nav-tabs"},[a("md-card-content",[e._t("content")],2)],1)}),ke=[],$e={name:"nav-tabs-card"},Ae=$e,Re=Object(h["a"])(Ae,xe,ke,!1,null,null,null),De=Re.exports,Pe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("md-card",{staticClass:"md-card-stats"},[a("md-card-header",{attrs:{"data-background-color":e.dataBackgroundColor}},[e._t("header")],2),a("md-card-content",[e._t("content")],2),a("md-card-actions",{attrs:{"md-alignment":"left"}},[e._t("footer")],2)],1)},Oe=[],Ie={name:"stats-card",props:{dataBackgroundColor:{type:String,default:""}}},Ve=Ie,ze=Object(h["a"])(Ve,Pe,Oe,!1,null,null,null),Ue=ze.exports,Ee=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("md-table",{on:{"md-selected":e.onSelect},scopedSlots:e._u([{key:"md-table-row",fn:function(t){var s=t.item;return a("md-table-row",{},[a("md-table-cell",[e._v(e._s(s[e.proprierty]))])],1)}}]),model:{value:e.items,callback:function(t){e.items=t},expression:"items"}})],1)},je=[],Ne={name:"nav-tabs-table",props:{items:Array,proprierty:String},data:function(){return{selected:[],data:[]}},methods:{onSelect:function(e){this.selected=e}}},Te=Ne,Be=Object(h["a"])(Te,Ee,je,!1,null,null,null),Me=Be.exports,qe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("md-table",{attrs:{"table-header-color":e.tableHeaderColor},scopedSlots:e._u([{key:"md-table-row",fn:function(t){var s=t.item;return a("md-table-row",{},[a("md-table-cell",{attrs:{"md-label":"Nome"}},[e._v(e._s(s.name))]),a("md-table-cell",{attrs:{"md-label":"Email"}},[e._v(e._s(s.email))]),a("md-table-cell",{attrs:{"md-label":"Perfil"}},[e._v(e._s(s.role.perfil))])],1)}}]),model:{value:e.users,callback:function(t){e.users=t},expression:"users"}})],1)},Le=[],Fe={name:"ordered-table",props:{tableHeaderColor:{type:String,default:""},users:Array},data:function(){return{selected:[]}}},Ge=Fe,He=Object(h["a"])(Ge,qe,Le,!1,null,null,null),Ke=He.exports,Je=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("md-table",{attrs:{"md-sort-order":"asc","table-header-color":e.tableHeaderColor},scopedSlots:e._u([{key:"md-table-row",fn:function(t){var s=t.item;return a("md-table-row",{},[a("md-table-cell",{attrs:{"md-label":"Seguro"}},[e._v(e._s(s.seguro.modalidade.modalidade))]),a("md-table-cell",{attrs:{"md-label":"Seguradora"}},[e._v(e._s(s.seguro.seguradora.seguradora))]),a("md-table-cell",{attrs:{"md-label":"Cliente"}},[e._v(e._s(s.cliente.name))]),a("md-table-cell",{attrs:{"md-label":"Tipo"}},[e._v(e._s(s.cliente.role.perfil))]),a("md-table-cell",{attrs:{"md-label":"Preço"}},[e._v(e._s(s.price))]),a("md-table-cell",{attrs:{"md-label":"Data Solicitada"}},[e._v(e._s(e.getData(s.seguro.createdAt)))]),a("md-table-cell",{attrs:{"md-label":"Caducidade"}},[e._v(e._s(e.getData(s.validAt)))]),a("md-table-cell",{attrs:{"md-label":"Docs"}},[e._v("Ver Docs")]),a("md-table-cell",{attrs:{"md-label":"Estado"}},[e._v(e._s(s.estado.estado))]),a("md-table-cell",{attrs:{"md-label":"Opções"}},[a("md-button",{staticClass:"md-just-icon md-simple md-primary"},[a("md-icon",[e._v("edit")]),a("md-tooltip",{attrs:{"md-direction":"top"}},[e._v("Edit")])],1)],1)],1)}}]),model:{value:e.searched,callback:function(t){e.searched=t},expression:"searched"}},[a("md-table-toolbar",[a("div",{staticClass:"md-toolbar-section-start"}),a("md-field",{staticClass:"md-toolbar-section-end",attrs:{"md-clearable":""}},[a("md-input",{attrs:{placeholder:"Pesquisar por Seguro..."},on:{input:e.searchOnTable},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1)],1),a("md-table-empty-state",{attrs:{"md-label":"Nenhum Solicitação Encontrada","md-description":"Nenhum utilizador com o nome '"+e.search+"' encontrado. Tenta pesquisar com um nome diferente."}})],1)],1)},We=[],Ye=(a("ac1f"),a("841c"),function(e){return e.toString().toLowerCase()}),Ze=function(e,t){return t?e.filter((function(e){return Ye(e.seguro.modalidade.modalidade).includes(Ye(t))})):e},Qe={name:"solicitacao-table",props:{tableHeaderColor:{type:String,default:""},solicitacoes:Array},data:function(){return{selected:[],search:null,searched:[]}},methods:{getData:function(e){var t=new Date(e);return"".concat(t.getFullYear(),"-").concat(t.getMonth()+1,"-").concat(t.getDate())},newUser:function(){window.alert("Noop")},searchOnTable:function(){this.searched=Ze(this.solicitacoes,this.search)},changeBloqState:function(e){e.isBloqued=!e.isBloqued},fecthUsers:function(){this.searched=this.solicitacoes}},mounted:function(){this.fecthUsers()}},Xe=Qe,et=(a("3700"),Object(h["a"])(Xe,Je,We,!1,null,"76918b56",null)),tt=(et.exports,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ul",{staticClass:"pagination",class:e.paginationClass},[a("li",{staticClass:"page-item prev-page",class:{disabled:1===e.value,"no-arrows":e.noArrows}},[a("a",{staticClass:"page-link",attrs:{"aria-label":"Previous"},on:{click:e.prevPage}},[e.withText?[e._v("Prev")]:a("i",{staticClass:"fas fa-angle-double-left"})],2)]),e._l(e.range(e.minPage,e.maxPage),(function(t){return a("li",{key:t,staticClass:"page-item",class:{active:e.value===t}},[a("a",{staticClass:"page-link",on:{click:function(a){return e.changePage(t)}}},[e._v(e._s(t))])])})),a("li",{staticClass:"page-item page-pre next-page",class:{disabled:e.value===e.totalPages,"no-arrows":e.noArrows}},[a("a",{staticClass:"page-link",attrs:{"aria-label":"Next"},on:{click:e.nextPage}},[e.withText?[e._v("Next")]:a("i",{staticClass:"fas fa-angle-double-right"})],2)])],2)}),at=[],st=(a("a9e3"),{name:"pagination",props:{type:{type:String,default:"primary",validator:function(e){return["default","primary","danger","success","warning","info","rose"].includes(e)}},withText:Boolean,noArrows:Boolean,pageCount:{type:Number,default:0},perPage:{type:Number,default:10},total:{type:Number,default:0},value:{type:Number,default:1}},computed:{paginationClass:function(){return"pagination-".concat(this.type)},totalPages:function(){return this.pageCount>0?this.pageCount:this.total>0?Math.ceil(this.total/this.perPage):1},pagesToDisplay:function(){return this.totalPages>0&&this.totalPages<this.defaultPagesToDisplay?this.totalPages:this.defaultPagesToDisplay},minPage:function(){if(this.value>=this.pagesToDisplay){var e=Math.floor(this.pagesToDisplay/2),t=e+this.value;return t>this.totalPages?this.totalPages-this.pagesToDisplay+1:this.value-e}return 1},maxPage:function(){if(this.value>=this.pagesToDisplay){var e=Math.floor(this.pagesToDisplay/2),t=e+this.value;return t<this.totalPages?t:this.totalPages}return this.pagesToDisplay}},data:function(){return{defaultPagesToDisplay:5}},methods:{range:function(e,t){for(var a=[],s=e;s<=t;s++)a.push(s);return a},changePage:function(e){this.$emit("input",e)},nextPage:function(){this.value<this.totalPages&&this.$emit("input",this.value+1)},prevPage:function(){this.value>1&&this.$emit("input",this.value-1)}},watch:{perPage:function(){this.$emit("input",1)},total:function(){this.$emit("input",1)}}}),it=st,ot=Object(h["a"])(it,tt,at,!1,null,null,null),rt=ot.exports,nt={components:{StatsCard:Ue,NavTabsCard:De,NavTabsTable:Me,OrderedTable:Ke},data:function(){return{}},computed:{getNewUsers:function(){return this.$store.getters["userStore/getClientes"]},countClientes:function(){return this.$store.getters["userStore/countClientes"]},getMediadores:function(){return this.$store.getters["userStore/getMediadores"]},getSeguradoras:function(){return this.$store.getters.getSeguradoras},getModalidades:function(){return this.$store.getters.getModalidades},countSolicitacoesPendentes:function(){return this.$store.getters["solicitacaoStore/countSolicitacoesPendentes"]},countSolicitacoesAtendidas:function(){return this.$store.getters["solicitacaoStore/countSolicitacoesAtendidas"]},countSolicitacoesCaducadas:function(){return this.$store.getters["solicitacaoStore/countSolicitacoesCaducadas"]}}},ct=nt,lt=Object(h["a"])(ct,ve,be,!1,null,null,null),dt=lt.exports,ut=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content"},[a("div",{staticClass:"md-layout"},[a("div",{staticClass:"md-layout-item md-medium-size-100 md-size-66"},[a("edit-profile-form",{attrs:{"get-user":e.getUser,"data-background-color":"green"},on:{"update-user":e.updateUser}})],1),a("div",{staticClass:"md-layout-item md-medium-size-100 md-size-33"},[a("user-card",{attrs:{"get-user":e.getUser,"get-profile-photo":e.getProfilePhoto},on:{"update-user":e.updateUser}})],1)])])},mt=[],pt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("md-card",{staticClass:"md-card-profile"},[a("notifications"),a("div",{staticClass:"md-card-avatar"},[a("img",{staticClass:"img",attrs:{src:e.getProfilePhoto}})]),a("md-card-content",[a("h6",{staticClass:"category text-gray"},[e._v(e._s(e.getUser.role.perfil))]),a("h4",{staticClass:"card-title"},[e._v(e._s(e.getUser.name))]),a("p",{staticClass:"card-description"},[e._v(e._s(e.getUser.descicao))]),a("input",{ref:"fileInput",staticStyle:{display:"none"},attrs:{type:"file",accept:"image/jpeg, image/png, image/jpg"},on:{change:function(t){return e.updateProfilePhoto(t)}}}),a("md-button",{directives:[{name:"show",rawName:"v-show",value:e.isMyProfile,expression:"isMyProfile"}],staticClass:"md-round md-success",on:{click:function(t){return e.$refs.fileInput.click()}}},[e._v("Actualizar Foto")])],1)],1)},ft=[],gt={name:"user-card",props:{cardUserImage:{type:String,default:a("a180")},getUser:Object,getProfilePhoto:String,isMyProfile:{type:Boolean,default:!0}},data:function(){return{}},computed:{},methods:{updateProfilePhoto:function(e){var t=e.currentTarget.files,a=new FormData;a.append("photo",t[0]),this.$emit("update-user",a)}}},ht=gt,vt=Object(h["a"])(ht,pt,ft,!1,null,null,null),bt=vt.exports,yt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("form",[a("notifications"),a("md-card",[a("md-card-header",{attrs:{"data-background-color":e.dataBackgroundColor}},[a("h4",{staticClass:"title"},[e._v(e._s(e.title))]),a("p",{staticClass:"category"},[e._v(e._s(e.description))])]),a("md-card-content",[a("div",{staticClass:"md-layout"},[a("div",{staticClass:"md-layout-item md-small-size-100 md-size-100"},[a("md-field",[a("label",[e._v("Nome")]),a("md-input",{attrs:{type:"text",disabled:e.isBloque},model:{value:e.user.name,callback:function(t){e.$set(e.user,"name",t)},expression:"user.name"}})],1)],1),a("div",{staticClass:"md-layout-item md-small-size-100 md-size-60"},[a("md-field",[a("label",[e._v("Email")]),a("md-input",{attrs:{type:"email",disabled:e.isBloque},model:{value:e.user.email,callback:function(t){e.$set(e.user,"email",t)},expression:"user.email"}})],1)],1),a("div",{staticClass:"md-layout-item md-small-size-100 md-size-40"},[a("md-field",[a("label",[e._v("Telemovel")]),a("md-input",{attrs:{type:"text",disabled:e.isBloque},model:{value:e.user.telemovel,callback:function(t){e.$set(e.user,"telemovel",t)},expression:"user.telemovel"}})],1)],1),a("div",{staticClass:"md-layout-item md-small-size-100 md-size-60"},[a("md-field",[a("label",[e._v("Endereco")]),a("md-input",{attrs:{type:"text",disabled:e.isBloque},model:{value:e.user.endereco,callback:function(t){e.$set(e.user,"endereco",t)},expression:"user.endereco"}})],1)],1),a("div",{staticClass:"md-layout-item md-small-size-100 md-size-40"},[a("md-field",[a("label",[e._v("NIF")]),a("md-input",{attrs:{type:"text",disabled:e.isBloque},model:{value:e.user.nif,callback:function(t){e.$set(e.user,"nif",t)},expression:"user.nif"}})],1)],1),a("div",{staticClass:"md-layout-item md-small-size-100 md-size-40"},[a("md-field",[a("label",[e._v("Sector de Actividade")]),a("md-input",{attrs:{type:"text",disabled:e.isBloque},model:{value:e.user.sectorActividade,callback:function(t){e.$set(e.user,"sectorActividade",t)},expression:"user.sectorActividade"}})],1)],1),a("div",{staticClass:"md-layout-item md-small-size-100 md-size-60"},[a("md-field",[a("label",[e._v("Actividade")]),a("md-input",{attrs:{type:"text",disabled:e.isBloque},model:{value:e.user.actividade,callback:function(t){e.$set(e.user,"actividade",t)},expression:"user.actividade"}})],1)],1),a("div",{staticClass:"md-layout-item md-size-100"},[a("md-field",{attrs:{maxlength:"5"}},[a("label",[e._v("Sobre")]),a("md-textarea",{attrs:{disabled:e.isBloque},model:{value:e.user.descricao,callback:function(t){e.$set(e.user,"descricao",t)},expression:"user.descricao"}})],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isMyProfile,expression:"isMyProfile"}],staticClass:"md-layout-item md-size-100 text-right"},[a("md-button",{staticClass:"md-raised md-success",on:{click:e.update}},[e._v("Actualizar")])],1),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isBloque,expression:"isBloque"}],staticClass:"md-layout-item md-size-100 text-right"},[a("md-button",{staticClass:"md-raised md-success",on:{click:e.bloque}},[e._v(e._s(e.getBloqText))])],1)])])],1)],1)},Ct=[],_t=(a("a15b"),a("b0c0"),a("1276"),a("ade3")),wt=a("5530"),St=Object(_t["a"])({name:"edit-profile-form",props:{dataBackgroundColor:{type:String,default:""},getUser:Object,title:{type:String,default:"Editar Perfil"},description:{type:String,default:"Complete o seu perfil"},isBloque:{type:Boolean,dafault:!1},isMyProfile:{type:Boolean,default:!0}},data:function(){return{user:{_id:null,name:null,descricao:null,email:null,telemovel:null,endereco:null,photo:null,actividade:null,sectorActividade:null,nif:null,isBloqued:!1}}},watch:{getUser:function(e,t){this.setUser(e)}},mounted:function(){this.setUser(this.getUser)},computed:{},methods:{setUser:function(e){this.user._id=e._id,this.user.name=e.name,this.user.descricao=e.descricao,this.user.email=e.email,this.user.telemovel=e.telemovel,this.user.endereco=e.endereco.join(";"),this.user.photo=e.photo,this.user.actividade=e.actividade,this.user.sectorActividade=e.sectorActividade,this.user.nif=e.nif,this.user.isBloqued=e.isBloqued},update:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=Object(wt["a"])({},e.user),a.endereco=e.user.endereco.split(";"),e.$emit("update-user",a);case 3:case"end":return t.stop()}}),t)})))()},bloque:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,s,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=e.user,s=a._id,i=a.isBloqued,e.$emit("bloque-user",{_id:s,isBloqued:!i});case 2:case"end":return t.stop()}}),t)})))()}}},"computed",{getBloqText:function(){return this.user.isBloqued?"Desbloquear":"Bloquear"}}),xt=St,kt=Object(h["a"])(xt,yt,Ct,!1,null,null,null),$t=kt.exports,At=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("form",[a("md-card",{staticClass:"md-card md-elevation-24"},[a("md-card-header",{staticClass:"text-center",attrs:{"data-background-color":e.dataBackgroundColor}},[a("h4",{staticClass:"title"},[e._v("CJA - Mediação de Seguros")]),a("p",{staticClass:"category"},[e._v("Entrar")])]),a("md-card-content",[a("div",{staticClass:"md-layout"},[a("div",{staticClass:"md-layout-item md-small-size-100 md-size-100"},[a("md-field",[a("label",[e._v("Email")]),a("md-input",{attrs:{type:"email"},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}})],1)],1),a("div",{staticClass:"md-layout-item md-small-size-100 md-size-100"},[a("md-field",[a("label",[e._v("Password")]),a("md-input",{attrs:{type:"password"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1)],1),a("div",{staticClass:"md-layout-item md-small-size-100 md-size-100"},[a("p",[e._v(" Não tem uma conta? "),a("router-link",{attrs:{to:"/signup"}},[e._v("Registra-se já!")])],1)]),a("div",{staticClass:"md-layout-item md-size-100 text-center"},[a("md-button",{staticClass:"md-raised md-success",on:{click:e.login}},[e._v("Entrar")])],1)])]),e.sending?a("md-progress-bar",{attrs:{"md-mode":"indeterminate"}}):e._e()],1)],1)},Rt=[],Dt={name:"login-form",props:{dataBackgroundColor:{type:String,default:""}},data:function(){return{email:"",password:"",sending:!1}},methods:{login:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.sending=!0,t.prev=1,t.next=4,e.$store.dispatch("userStore/login",{email:e.email,password:e.password});case 4:t.sent,t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](1),e.notifyVue(C.DANGER,t.t0.message);case 10:e.sending=!1,a=e.$store.getters["userStore/getIsAuth"],a&&e.$router.push({path:"/"});case 13:case"end":return t.stop()}}),t,null,[[1,7]])})))()},notifyVue:function(e,t){this.$notify({message:t,icon:"add_alert",horizontalAlign:"right",verticalAlign:"top",type:e})}}},Pt=Dt,Ot=(a("5538"),Object(h["a"])(Pt,At,Rt,!1,null,null,null)),It=Ot.exports,Vt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("form",{staticClass:"md-layout",staticStyle:{"overflow-y":"hidden"},attrs:{novalidate:""},on:{submit:function(t){return t.preventDefault(),e.validateUser(t)}}},[a("md-card",{staticClass:"md-card"},[a("md-card-header",{staticClass:"text-center",attrs:{"data-background-color":e.dataBackgroundColor}},[a("h4",{staticClass:"title"},[e._v("CJA - Mediação de Seguros")]),a("p",{staticClass:"category"},[e._v("Registrar-se!")])]),a("md-card-content",[a("div",{staticClass:"md-layout-item md-small-size-100"},[a("md-field",{class:e.getValidationClass("name")},[a("label",{attrs:{for:"first-name"}},[e._v("Name")]),a("md-input",{attrs:{name:"first-name",id:"first-name",autocomplete:"given-name",disabled:e.sending},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}}),e.$v.form.name.required?e.$v.form.name.minlength?e._e():a("span",{staticClass:"md-error"},[e._v("Invalid first name")]):a("span",{staticClass:"md-error"},[e._v("The first name is required")])],1)],1),a("div",{staticClass:"md-layout-item md-small-size-100"},[a("md-field",{class:e.getValidationClass("role")},[a("label",{attrs:{for:"role"}},[e._v("Perfil")]),a("md-select",{attrs:{name:"role",id:"role","md-dense":"",disabled:e.sending},model:{value:e.form.role,callback:function(t){e.$set(e.form,"role",t)},expression:"form.role"}},[a("md-option"),e._l(e.perfils,(function(t){return a("md-option",{key:t._id,attrs:{value:t.perfilCode}},[e._v(" "+e._s(t.perfil)+" ")])}))],2),e.$v.form.role.required?e._e():a("span",{staticClass:"md-error"},[e._v("The Perfil is required")])],1)],1),a("div",{staticClass:"md-layout"},[a("div",{staticClass:"md-layout-item md-small-size-100 md-size-100"},[a("md-field",{class:e.getValidationClass("email")},[a("label",{attrs:{for:"email"}},[e._v("Email")]),a("md-input",{attrs:{type:"email",name:"email",id:"email",autocomplete:"email",disabled:e.sending},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}}),e.$v.form.email.required?e.$v.form.email.email?e._e():a("span",{staticClass:"md-error"},[e._v("Invalid email")]):a("span",{staticClass:"md-error"},[e._v("The email is required")])],1)],1),a("div",{staticClass:"md-layout-item md-small-size-100"},[a("md-field",{class:e.getValidationClass("telemovel")},[a("label",{attrs:{for:"first-name"}},[e._v("Telemovel")]),a("md-input",{attrs:{name:"telemovel",id:"telemovel",autocomplete:"given-name",disabled:e.sending},model:{value:e.form.telemovel,callback:function(t){e.$set(e.form,"telemovel",t)},expression:"form.telemovel"}}),e.$v.form.telemovel.required?e.$v.form.telemovel.isValid?e._e():a("span",{staticClass:"md-error"},[e._v("Invalid telemovel")]):a("span",{staticClass:"md-error"},[e._v("The telemovel is required")])],1)],1),a("div",{staticClass:"md-layout-item md-small-size-100 md-size-100"},[a("md-field",{class:e.getValidationClass("password")},[a("label",[e._v("Password")]),a("md-input",{attrs:{type:"password"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}}),e.$v.form.password.required?e._e():a("span",{staticClass:"md-error"},[e._v("The first name is required")])],1)],1),a("div",{staticClass:"md-layout-item md-small-size-100 md-size-100"},[a("md-field",{class:e.getValidationClass("passwordConfirm")},[a("label",[e._v("Confirmar Password")]),a("md-input",{attrs:{type:"password"},model:{value:e.form.passwordConfirm,callback:function(t){e.$set(e.form,"passwordConfirm",t)},expression:"form.passwordConfirm"}}),e.$v.form.passwordConfirm.required?e._e():a("span",{staticClass:"md-error"},[e._v("The first name is required")])],1)],1),a("div",{staticClass:"md-layout-item md-small-size-100 md-size-100"},[a("p",[e._v(" Já tem uma conta? "),a("router-link",{attrs:{to:"/login"}},[e._v("Entre Aqui!")])],1)]),a("div",{staticClass:"md-layout-item md-size-100 text-center"},[a("md-card-actions",{staticStyle:{"justify-content":"center!important"}},[a("md-button",{staticClass:"md-raised md-success",attrs:{type:"submit",disabled:e.sending}},[e._v("Registrar")])],1)],1)])]),e.sending?a("md-progress-bar",{attrs:{"md-mode":"indeterminate"}}):e._e()],1),a("md-snackbar",{attrs:{"md-active":e.userSaved},on:{"update:mdActive":function(t){e.userSaved=t},"update:md-active":function(t){e.userSaved=t}}},[e._v("O utilizador "+e._s(e.lastUser)+" foi salvo com Sucesso!")])],1)},zt=[],Ut=a("1dce"),Et=Ut.validationMixin,jt=(Ut.default,a("b5ae")),Nt=jt.required,Tt=jt.email,Bt=jt.minLength,Mt=(jt.maxLength,{name:"sigin-form",props:{dataBackgroundColor:{type:String,default:""}},mixins:[Et],mounted:function(){this.$store.dispatch("getPerfils")},data:function(){return{form:{name:null,role:null,email:null,telemovel:null,password:null,passwordConfirm:null},userSaved:!1,sending:!1,lastUser:null}},validations:{form:{name:{required:Nt,minLength:Bt(3)},role:{required:Nt},email:{required:Nt,email:Tt},telemovel:{required:Nt,isValid:function(e){return/^([+]?244){0,1}\s{0,1}9([1-4]|9)[0-9]{1}\s{0,1}[0-9]{3}\s{0,1}[0-9]{3}$/g.test(e)}},password:{required:Nt},passwordConfirm:{required:Nt}}},methods:{getValidationClass:function(e){var t=this.$v.form[e];if(t)return{"md-invalid":t.$invalid&&t.$dirty}},clearForm:function(){this.$v.$reset(),this.form.name=null,this.form.password=null,this.form.passwordConfirm=null,this.form.role=null,this.form.email=null,this.form.telemovel=null},saveUser:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.sending=!0,t.prev=1,t.next=4,e.$store.dispatch("userStore/signup",e.form);case 4:t.sent,e.userSaved=!0,e.sending=!1,e.clearForm(),t.next=14;break;case 10:t.prev=10,t.t0=t["catch"](1),e.sending=!1,e.notifyVue(C.DANGER,t.t0.message);case 14:isAuth&&e.$router.push({path:"/"});case 15:case"end":return t.stop()}}),t,null,[[1,10]])})))()},validateUser:function(){this.$v.$touch(),this.$v.$invalid||this.saveUser()},notifyVue:function(e,t){this.$notify({message:t,icon:"add_alert",horizontalAlign:"right",verticalAlign:"top",type:e})}},computed:{perfils:function(){return this.$store.getters.getPerfils}}}),qt=Mt,Lt=(a("8661"),Object(h["a"])(qt,Vt,zt,!1,null,null,null)),Ft=Lt.exports,Gt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("md-table",{attrs:{"md-sort":"name","md-sort-order":"asc"},scopedSlots:e._u([{key:"md-table-row",fn:function(t){var s=t.item;return a("md-table-row",{},[a("md-table-cell",{attrs:{"md-label":"Name","md-sort-by":"name"}},[e._v(e._s(s.name))]),a("md-table-cell",{attrs:{"md-label":"Email","md-sort-by":"email"}},[e._v(e._s(s.email))]),a("md-table-cell",{attrs:{"md-label":"Telemovel","md-sort-by":"telemovel"}},[e._v(e._s(s.telemovel))]),a("md-table-cell",{attrs:{"md-label":"Perfil","md-sort-by":"role.perfilCode"}},[e._v(e._s(s.role.perfil))]),a("md-table-cell",{attrs:{"md-label":"Opções"}},[a("md-button",{staticClass:"md-just-icon md-simple md-success",on:{click:function(t){return e.callUserDetalhe(s)}}},[a("md-icon",[e._v("visibility")]),a("md-tooltip",{attrs:{"md-direction":"top"}},[e._v("Ver Detalhes")])],1),a("md-button",{directives:[{name:"show",rawName:"v-show",value:s.isBloqued,expression:"item.isBloqued"}],staticClass:"md-just-icon md-simple md-success"},[a("md-icon",[e._v("lock")]),a("md-tooltip",{attrs:{"md-direction":"top"}},[e._v("Bloqueado")])],1)],1)],1)}}]),model:{value:e.searched,callback:function(t){e.searched=t},expression:"searched"}},[a("md-table-toolbar",[a("div",{staticClass:"md-toolbar-section-start"}),a("md-field",{staticClass:"md-toolbar-section-end",attrs:{"md-clearable":""}},[a("md-input",{attrs:{placeholder:"Pesquisar por Nome..."},on:{input:e.searchOnTable},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1)],1),a("md-table-empty-state",{attrs:{"md-label":"Nenhum Utilizador Encontrado ","md-description":"Nenhum utilizador com o nome '"+e.search+"' encontrado. Tenta pesquisar com um nome diferente."}})],1),a("Pagination",{attrs:{total:e.users.length,perPage:e.limit,type:"success",value:e.page},on:{input:e.changePage}})],1)},Ht=[],Kt=(a("fb6a"),a("f206"),function(e){return e.toString().toLowerCase()}),Jt=function(e,t){return t?e.filter((function(e){return Kt(e.name).includes(Kt(t))})):e},Wt={name:"TableUsers",props:{users:Array},data:function(){return{search:null,searched:[],limit:5,page:1}},methods:{callUserDetalhe:function(e){this.$router.push({name:"users-detalhe",params:{userId:e._id}})},changePage:function(e){this.page=e;var t=(e-1)*this.limit;this.searched=Object(x["a"])(this.users.slice(t,t+this.limit))},newUser:function(){window.alert("Noop")},searchOnTable:function(){this.searched=Jt(this.users,this.search)},changeBloqState:function(e){console.log(e)},fecthUsers:function(){this.changePage(1)}},mounted:function(){this.fecthUsers()},components:{Pagination:rt}},Yt=Wt,Zt=(a("87e9"),Object(h["a"])(Yt,Gt,Ht,!1,null,"508a265a",null)),Qt=Zt.exports,Xt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("form",{staticClass:"md-layout",attrs:{novalidate:""},on:{submit:function(e){e.preventDefault()}}},[a("div",{staticClass:"md-layout md-gutter"},[a("div",{staticClass:"md-layout-item md-small-size-100 md-size-50",class:e.getValidationClass("dataPartida")},[a("label",{staticStyle:{"margin-bottom":"0!important"},attrs:{for:"data-partida"}},[e._v("Data de Partida")]),a("md-datepicker",{attrs:{name:"data-partida",id:"data-partida","md-immediately":"","md-disabled-dates":e.disabledDatePartida},model:{value:e.seguroViagem.dataPartida,callback:function(t){e.$set(e.seguroViagem,"dataPartida",t)},expression:"seguroViagem.dataPartida"}}),e.$v.seguroViagem.dataPartida.required?e._e():a("span",{staticClass:"md-error"},[e._v("Campo Obrigatório!")])],1),a("div",{staticClass:"md-layout-item md-small-size-100 md-size-50",class:e.getValidationClass("dataVolta")},[a("label",{staticStyle:{"margin-bottom":"0!important"},attrs:{for:"data-volta"}},[e._v("Data de Volta")]),a("md-datepicker",{attrs:{name:"data-volta",id:"data-volta","md-immediately":"","md-disabled-dates":e.disabledDateVolta()},model:{value:e.seguroViagem.dataVolta,callback:function(t){e.$set(e.seguroViagem,"dataVolta",t)},expression:"seguroViagem.dataVolta"}}),e.$v.seguroViagem.dataVolta.required?e._e():a("span",{staticClass:"md-error"},[e._v("Campo Obrigatório!")])],1),a("div",{staticClass:"md-layout-item md-small-size-100 md-size-33"},[a("md-field",{class:e.getValidationClass("plano")},[a("label",{attrs:{for:"plano"}},[e._v("Plano")]),a("md-select",{attrs:{name:"plano",id:"plano","md-dense":"",disabled:e.sending},model:{value:e.seguroViagem.plano,callback:function(t){e.$set(e.seguroViagem,"plano",t)},expression:"seguroViagem.plano"}},e._l(e.getPlanos,(function(t){return a("md-option",{key:t,attrs:{value:t}},[e._v(e._s(t))])})),1),a("span",{staticClass:"md-error"},[e._v("Campo Obrigatório!")])],1)],1),a("div",{staticClass:"md-layout-item md-small-size-100 md-size-33"},[a("md-field",{class:e.getValidationClass("pessoas")},[a("label",{attrs:{for:"pessoas"}},[e._v("Pessoas")]),a("md-input",{attrs:{type:"number",id:"pessoas",name:"pessoas",autocomplete:"pessoas",disabled:e.sending},model:{value:e.seguroViagem.pessoas,callback:function(t){e.$set(e.seguroViagem,"pessoas",t)},expression:"seguroViagem.pessoas"}}),e.$v.seguroViagem.pessoas.required?e._e():a("span",{staticClass:"md-error"},[e._v("Campo Obrigatório!")])],1)],1),a("div",{staticClass:"md-layout-item md-small-size-100 md-size-33"},[a("md-field",[a("label",{attrs:{for:"documentos"}},[e._v("BI ou Passaport")]),a("md-file",{attrs:{name:"documentos",id:"documentos",disabled:e.sending,multiple:""},on:{change:e.setDocs},model:{value:e.documentos,callback:function(t){e.documentos=t},expression:"documentos"}})],1)],1)]),e.sending?a("md-progress-bar",{attrs:{"md-mode":"indeterminate"}}):e._e()],1),a("md-button",{staticClass:"md-raised md-success",attrs:{disabled:e.sending},on:{click:e.validateSeguroViagem}},[e._v("Continuar")])],1)},ea=[],ta=a("1dce"),aa=a("b5ae"),sa=a("b166"),ia={name:"seguro-viagem",mixins:[ta["validationMixin"]],props:{seguradora:Object,modalidade:Object},data:function(){var e=this.$material.locale.dateFormat||"yyyy-MM-dd",t=new Date;return{seguroViagem:{plano:null,pessoas:1,dataPartida:Object(sa["a"])(t,e),dataVolta:null},documentos:null,docsIdentificacaos:null,userSaved:!1,sending:!1}},validations:{seguroViagem:{plano:{required:aa["required"]},pessoas:{required:aa["required"]},dataPartida:{required:aa["required"]},dataVolta:{required:aa["required"]}}},methods:{setDocs:function(){this.docsIdentificacaos=this.documentos.target.files[0]},disabledDatePartida:function(e){var t=Date.now();return t>=e},disabledDateVolta:function(){var e=this.seguroViagem.dataPartida;return function(t){var a=new Date(e);return a>=t}},getValidationClass:function(e){var t=this.$v.seguroViagem[e];if(t)return{"md-invalid":t.$invalid&&t.$dirty}},saveSeguroViagem:function(){var e=this;this.sending=!0,this.seguroViagem.seguradora=this.seguradora.codigoSeguradora,this.seguroViagem.modalidade=this.modalidade.modalidade,Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch("seguroViagemStore/simularSeguroViagem",e.seguroViagem);case 3:e.$emit("is-valid",{id:"second",index:"third",seguroViagem:e.seguroViagem,documentos:e.docsIdentificacaos}),e.sending=!1,t.next=11;break;case 7:t.prev=7,t.t0=t["catch"](0),e.sending=!1,e.notifyVue(status.WARNING,t.t0.message);case 11:case"end":return t.stop()}}),t,null,[[0,7]])})))()},validateSeguroViagem:function(){this.$v.$touch(),this.$v.$invalid||this.saveSeguroViagem()},notifyVue:function(e,t){this.$notify({message:t,icon:"add_alert",horizontalAlign:"right",verticalAlign:"top",type:e})}},computed:{getPlanos:function(){return this.$store.getters.getPlanos}}},oa=ia,ra=(a("6988"),Object(h["a"])(oa,Xt,ea,!1,null,"36c0e470",null)),na=ra.exports,ca=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"md-layout md-gutter"},[a("div",{staticClass:"md-layout-item"},[a("md-field",[a("label",{attrs:{for:"seguradora"}},[e._v("Seguradoras")]),a("md-select",{attrs:{name:"seguradora",id:"seguradora"},on:{"md-selected":function(t){return e.setSeguradora()}},model:{value:e.seguradoraId,callback:function(t){e.seguradoraId=t},expression:"seguradoraId"}},e._l(e.getSeguradoras,(function(t){return a("md-option",{key:t._id,attrs:{value:t._id}},[e._v(e._s(t.seguradora))])})),1)],1)],1),a("div",{staticClass:"md-layout-item"},[a("md-field",[a("label",{attrs:{for:"modalidade"}},[e._v("Modalidades")]),a("md-select",{attrs:{name:"modalidade",id:"modalidade",disabled:e.isModalidadeAvailable},on:{"md-selected":function(t){return e.setModalidade()}},model:{value:e.modalidadeId,callback:function(t){e.modalidadeId=t},expression:"modalidadeId"}},e._l(e.modalidades,(function(t){return a("md-option",{key:t._id,attrs:{value:t._id}},[e._v(e._s(t.modalidade))])})),1)],1)],1)]),a("md-button",{staticClass:"md-raised md-success",on:{click:function(t){return e.setDone()}}},[e._v("Continue")])],1)},la=[],da=(a("7db0"),{name:"seguradora-modalidade",props:{seguradoras:Array},mounted:function(){},data:function(){return{movie:"godfather",country:null,font:null,modalidadeId:null,seguradoraId:null,modalidades:[],modalidade:null,seguradora:null,isModalidadeAvailable:!0}},methods:{setSeguradora:function(){var e=this;this.modalidadeId="",this.seguradora=this.seguradoras.find((function(t){return t._id===e.seguradoraId})),this.modalidades=this.seguradora.modalidades.filter((function(e){return e.isActive})),this.modalidades.length>0&&(this.isModalidadeAvailable=!1)},setModalidade:function(){var e=this;this.modalidade=this.modalidades.find((function(t){return t._id===e.modalidadeId}))},setDone:function(){this.seguradora&&this.modalidade?this.$emit("is-valid",{id:"first",index:"second",seguradora:this.seguradora,modalidade:this.modalidade}):this.$emit("error",{message:"Campos não preenchidos"})}},computed:{getModalidades:function(){return this.modalidades},getSeguradoras:function(){return this.seguradoras.filter((function(e){return e.isActive}))}}}),ua=da,ma=Object(h["a"])(ua,ca,la,!1,null,null,null),pa=ma.exports,fa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"md-layout md-gutter"},[a("div",{staticClass:"md-layout-item md-small-size-100 md-size-33"},[a("md-field",[a("label",{attrs:{for:"seguradora"}},[e._v("Seguradora")]),a("md-input",{attrs:{type:"text",id:"seguradora",name:"seguradora",disabled:""},model:{value:e.seguro.seguradora.seguradora,callback:function(t){e.$set(e.seguro.seguradora,"seguradora",t)},expression:"seguro.seguradora.seguradora"}})],1)],1),a("div",{staticClass:"md-layout-item md-small-size-100 md-size-33"},[a("md-field",[a("label",{attrs:{for:"seguro"}},[e._v("Seguro")]),a("md-input",{attrs:{type:"text",id:"seguro",name:"seguro",disabled:""},model:{value:e.seguro.modalidade.modalidade,callback:function(t){e.$set(e.seguro.modalidade,"modalidade",t)},expression:"seguro.modalidade.modalidade"}})],1)],1),a("div",{staticClass:"md-layout-item md-small-size-100 md-size-33"},[a("md-field",[a("label",{attrs:{for:"preco"}},[e._v("Preço (AKZ)")]),a("md-input",{attrs:{type:"text",id:"preco",name:"preco",disabled:""},model:{value:e.seguro.price,callback:function(t){e.$set(e.seguro,"price",t)},expression:"seguro.price"}})],1)],1),a("div",{staticClass:"md-layout-item md-small-size-100 md-size-50"},[a("md-field",[a("label",{attrs:{for:"iban"}},[e._v("Iban")]),a("md-input",{attrs:{type:"text",id:"iban",name:"iban",disabled:""},model:{value:e.seguro.seguradora.ibans,callback:function(t){e.$set(e.seguro.seguradora,"ibans",t)},expression:"seguro.seguradora.ibans"}})],1)],1),a("div",{staticClass:"md-layout-item md-small-size-100 md-size-33"},[a("md-field",[a("label",{attrs:{for:"comprovativo"}},[e._v("Anexar Comprovativo")]),a("md-file",{attrs:{name:"comprovativo",id:"comprovativo",multiple:""},on:{change:e.setComprovativo},model:{value:e.comprovativos,callback:function(t){e.comprovativos=t},expression:"comprovativos"}})],1)],1)])])},ga=[],ha={name:"simulacao-result",props:{seguro:Object,iban:null},data:function(){return{comprovativos:null}},methods:{setComprovativo:function(){this.$emit("update-comprovativo",{comprovativos:this.comprovativos.target.files[0]})}}},va=ha,ba=(a("e04d"),Object(h["a"])(va,fa,ga,!1,null,"dc020130",null)),ya=ba.exports,Ca=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("md-dialog",{attrs:{"md-active":e.showDialog},on:{"update:mdActive":function(t){e.showDialog=t},"update:md-active":function(t){e.showDialog=t}}},[a("md-dialog-title",[e._v("Preçario")]),a("div",[a("md-table",{on:{"md-selected":e.onSelected},scopedSlots:e._u([{key:"md-table-row",fn:function(t){var s=t.item;return a("md-table-row",{attrs:{"md-selectable":"single","md-auto-select":""}},[a("md-table-cell",{attrs:{"md-label":"Plano"}},[e._v(e._s(e.getKeyDesc(s.key)))]),a("md-table-cell",{attrs:{"md-label":"Preço"}},[e._v(e._s(s.value)+" AKZ")])],1)}}]),model:{value:e.simulacaoViagem,callback:function(t){e.simulacaoViagem=t},expression:"simulacaoViagem"}})],1),a("md-dialog-actions",[a("md-button",{staticClass:"md-raised md-success",attrs:{disabled:e.isAvailable},on:{click:e.hideDialog}},[e._v("Continuar")])],1)],1)],1)},_a=[],wa={name:"seguro-viagem-preco",props:{showDialog:{type:Boolean,default:!1},simulacaoViagem:Array},data:function(){return{selected:null}},methods:{onSelected:function(e){this.selected=e},hideDialog:function(){this.$emit("set-preco",{preco:this.selected.value})},getKeyDesc:function(e){return"cinco"===e?"5.000.000":"dez"===e?"10.000.000":"15.000.000"}},computed:{isAvailable:function(){return!this.selected}}},Sa=wa,xa=(a("4463"),Object(h["a"])(Sa,Ca,_a,!1,null,"3a883686",null)),ka=xa.exports,$a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content"},[a("div",{staticClass:"md-layout md-gutter"},[a("div",{staticClass:"md-layout-item"},[a("md-card",[a("md-card-header",{attrs:{"data-background-color":"green"}},[a("h4",{staticClass:"title"},[e._v("Solicitação de Seguro")]),a("p",{staticClass:"category"})]),a("md-card-content",[a("seguro-viagem-preco",{attrs:{simulacaoViagem:e.getSimulacaoViagem,showDialog:e.showDialog},on:{"set-preco":e.setPreco}}),a("div",{staticClass:"md-layout"},[a("div",{staticClass:"md-layout-item md-medium-size-100 md-size-90"},[a("div",{attrs:{id:"sv-stepers"}},[a("md-steppers",{attrs:{"md-active-step":e.active,"md-linear":""},on:{"update:mdActiveStep":function(t){e.active=t},"update:md-active-step":function(t){e.active=t}}},[a("md-step",{staticClass:"md-success",attrs:{id:"first","md-label":"Seguradora e Modalidade","md-description":"Obrigatório","md-done":e.first},on:{"update:mdDone":function(t){e.first=t},"update:md-done":function(t){e.first=t}}},[a("seguradora-modalidade",{attrs:{seguradoras:e.getSeguradoras},on:{"is-valid":e.setSeguradoraModalidade,error:e.setError}})],1),a("md-step",{attrs:{id:"second","md-label":"Simulação","md-error":e.secondStepError,"md-done":e.second},on:{"update:mdDone":function(t){e.second=t},"update:md-done":function(t){e.second=t}}},[a("seguro-viagem",{attrs:{seguradora:e.seguro.seguradora,modalidade:e.seguro.modalidade},on:{error:function(t){return e.setError()},"is-valid":e.showModal}})],1),a("md-step",{attrs:{id:"third","md-label":"Resultado","md-done":e.third},on:{"update:mdDone":function(t){e.third=t},"update:md-done":function(t){e.third=t}}},[a("simulacao-result",{attrs:{seguro:e.seguro},on:{"update-comprovativo":e.setComprovativos}}),a("md-button",{staticClass:"md-raised md-success",on:{click:function(t){return e.solicitarSeguro()}}},[e._v("Solicitar")])],1)],1)],1)])])],1)],1)],1)])])},Aa=[],Ra={components:{SeguroViagem:na,SeguradoraModalidade:pa,SimulacaoResult:ya,SeguroViagemPreco:ka},data:function(){return{showDialog:!1,active:"first",first:!1,second:!1,third:!1,secondStepError:null,seguro:{modalidade:{},seguradora:{},price:null,simulacao:null,comprovativos:null,docIdentificacaos:null},lastId:null,lastIndex:null,seguroViagem:{}}},methods:{showModal:function(e){var t=e.id,a=e.index,s=e.seguroViagem,i=e.documentos;this.seguroViagem=s,this.seguro.docIdentificacaos=i,this.lastId=t,this.lastIndex=a,this.showDialog=!0},setPreco:function(e){var t=e.preco;this.showDialog=!1,this.seguro.price=t,this.setDone({id:this.lastId,index:this.lastIndex})},setDone:function(e){var t=e.id,a=e.index;this[t]=!0,this.secondStepError=null,a&&(this.active=a)},setError:function(e){var t=e.message;this.secondStepError=t},setSeguradoraModalidade:function(e){var t=e.id,a=e.index,s=e.seguradora,i=e.modalidade;this.seguro.modalidade=i,this.seguro.seguradora=s,this.setDone({id:t,index:a})},setComprovativos:function(e){var t=e.comprovativos;this.seguro.comprovativos=t},solicitarSeguro:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,s,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=new FormData,{},s=e.$loading.show({color:"#4caf50",opacity:.3}),a.append("tipo",e.getUser.role.perfil),a.append("modalidade",e.seguro.modalidade._id),a.append("seguradora",e.seguro.seguradora._id),a.append("price",e.seguro.price),null!==e.seguro.comprovativos&&a.append("comprovativos",e.seguro.comprovativos),e.seguro.docIdentificacaos&&a.append("docIdentificacaos",e.seguro.docIdentificacaos),t.prev=9,t.next=12,e.$store.dispatch("seguroStore/solicitarSeguro",a);case 12:return i=t.sent,t.next=15,e.solicitarSeguroViagem(i.data.doc._id);case 15:return t.next=17,e.solicitar({seguro:i.data.doc._id,cliente:e.getUser._id});case 17:e.fetchSolicitacoes(),s.hide(),e.$router.push("solicitacoes"),t.next=26;break;case 22:t.prev=22,t.t0=t["catch"](9),s.hide(),e.notifyVue(status.DANGER,t.t0.message);case 26:case"end":return t.stop()}}),t,null,[[9,22]])})))()},solicitarSeguroViagem:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,t.seguroViagem.seguro=e,a.next=4,t.$store.dispatch("seguroViagemStore/solicitarSeguroViagem",t.seguroViagem);case 4:a.sent,a.next=10;break;case 7:a.prev=7,a.t0=a["catch"](0),t.notifyVue(status.DANGER,a.t0.message);case 10:case"end":return a.stop()}}),a,null,[[0,7]])})))()},solicitar:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,t.$store.dispatch("solicitar",e);case 3:a.sent,a.next=9;break;case 6:a.prev=6,a.t0=a["catch"](0),t.notifyVue(status.DANGER,a.t0.message);case 9:case"end":return a.stop()}}),a,null,[[0,6]])})))()},fetchSolicitacoes:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch("solicitacaoStore/getSolicitacoes");case 3:t.next=8;break;case 5:t.prev=5,t.t0=t["catch"](0),e.notifyVue(status.DANGER,t.t0.message);case 8:case"end":return t.stop()}}),t,null,[[0,5]])})))()},notifyVue:function(e,t){this.$notify({message:t,icon:"add_alert",horizontalAlign:"right",verticalAlign:"top",type:e})}},computed:{getSeguradoras:function(){return this.$store.getters.getSeguradoras},getSimulacaoViagem:function(){return this.$store.getters["seguroViagemStore/getSimulacaoViagem"]},getUser:function(){return this.$store.getters["userStore/getUser"]}}},Da=Ra,Pa=Object(h["a"])(Da,$a,Aa,!1,null,"64774154",null),Oa=Pa.exports,Ia=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content"},[a("div",{staticClass:"md-layout md-gutter"},[a("div",{staticClass:"md-layout-item"},[a("md-card",[a("md-card-header",{attrs:{"data-background-color":"green"}},[a("h4",{staticClass:"title"},[e._v("Solicitação de Seguro Empresarial")]),a("p",{staticClass:"category"})]),a("md-card-content",[a("div",{staticClass:"md-layout"},[a("div",{staticClass:"md-layout-item md-small-size-100 md-size-50"},[a("md-field",[a("label",{attrs:{for:"modalidade"}},[e._v("Modalidades*")]),a("md-select",{attrs:{name:"modalidade",id:"modalidade"},on:{"md-selected":function(t){return e.setModalidade()}},model:{value:e.modalidadeId,callback:function(t){e.modalidadeId=t},expression:"modalidadeId"}},e._l(e.getModalidades,(function(t){return a("md-option",{key:t._id,attrs:{value:t._id}},[e._v(" "+e._s(t.modalidade)+" ")])})),1)],1)],1),a("div",{staticClass:"md-layout-item md-small-size-100 md-size-50"},[a("md-field",[a("label",{attrs:{for:"docsIdentificacao"}},[e._v("Anexar Documentos*")]),a("md-file",{attrs:{name:"docsIdentificacao",id:"docsIdentificacao",multiple:""},on:{change:e.setDocIdentificacaos},model:{value:e.docIdentificacaos,callback:function(t){e.docIdentificacaos=t},expression:"docIdentificacaos"}})],1)],1),a("md-button",{staticClass:"md-raised md-success",on:{click:function(t){return e.solicitarSeguro()}}},[e._v("Continue")])],1)])],1)],1)])])},Va=[],za={components:{},data:function(){return{movie:"godfather",country:null,font:null,modalidadeId:null,seguradoraId:null,modalidades:[],seguro:{modalidade:null,seguradora:null,comprovativos:null,docIdentificacaos:null},isModalidadeAvailable:!0,docIdentificacaos:null,comprovativos:null}},methods:{setSeguradora:function(){var e=this;this.modalidadeId="",this.seguro.seguradora=this.getSeguradoras.find((function(t){return t._id===e.seguradoraId})),this.modalidades=this.seguro.seguradora.modalidades.filter((function(e){return e.isActive})),this.modalidades.length>0&&(this.isModalidadeAvailable=!1)},setModalidade:function(){var e=this;this.seguro.modalidade=this.getModalidades.find((function(t){return t._id===e.modalidadeId}))},setComprovativos:function(){this.seguro.comprovativos=this.comprovativos.target.files},setDocIdentificacaos:function(){this.seguro.docIdentificacaos=this.docIdentificacaos.target.files},solicitarSeguro:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,s,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=new FormData,{},s=e.$loading.show({color:"#4caf50",opacity:.3}),e.seguro.comprovativos&&e.seguro.comprovativos.forEach((function(e){a.append("comprovativos",e)})),e.seguro.docIdentificacaos&&e.seguro.docIdentificacaos.forEach((function(e){a.append("docIdentificacaos",e)})),a.append("tipo",e.getUser.role.perfil),a.append("modalidade",e.seguro.modalidade._id),t.prev=7,t.next=10,e.$store.dispatch("seguroStore/solicitarSeguro",a);case 10:return i=t.sent,t.next=13,e.solicitar({seguro:i.data.doc._id,cliente:e.getUser._id});case 13:e.fetchSolicitacoes(),s.hide(),e.$router.push("solicitacoes"),t.next=22;break;case 18:t.prev=18,t.t0=t["catch"](7),s.hide(),e.notifyVue(status.DANGER,t.t0.message);case 22:case"end":return t.stop()}}),t,null,[[7,18]])})))()},solicitarSeguroViagem:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,t.seguroViagem.seguro=e,a.next=4,t.$store.dispatch("seguroViagemStore/solicitarSeguroViagem",t.seguroViagem);case 4:a.sent,a.next=10;break;case 7:a.prev=7,a.t0=a["catch"](0),t.notifyVue(status.DANGER,a.t0.message);case 10:case"end":return a.stop()}}),a,null,[[0,7]])})))()},solicitar:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,t.$store.dispatch("solicitar",e);case 3:a.sent,a.next=9;break;case 6:a.prev=6,a.t0=a["catch"](0),t.notifyVue(status.DANGER,a.t0.message);case 9:case"end":return a.stop()}}),a,null,[[0,6]])})))()},fetchSolicitacoes:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch("solicitacaoStore/getSolicitacoes");case 3:t.next=8;break;case 5:t.prev=5,t.t0=t["catch"](0),e.notifyVue(status.DANGER,t.t0.message);case 8:case"end":return t.stop()}}),t,null,[[0,5]])})))()},notifyVue:function(e,t){this.$notify({message:t,icon:"add_alert",horizontalAlign:"right",verticalAlign:"top",type:e})}},computed:{getModalidades:function(){return this.$store.getters.getModalidades},getSeguradoras:function(){return this.$store.getters.getSeguradoras.filter((function(e){return e.isActive}))},getSimulacaoViagem:function(){return this.$store.getters["seguroViagemStore/getSimulacaoViagem"]},getUser:function(){return this.$store.getters["userStore/getUser"]}}},Ua=za,Ea=Object(h["a"])(Ua,Ia,Va,!1,null,"60bf547a",null),ja=Ea.exports,Na=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("md-table",{attrs:{"md-sort-order":"asc","table-header-color":e.tableHeaderColor},scopedSlots:e._u([{key:"md-table-row",fn:function(t){var s=t.item;return a("md-table-row",{},[a("md-table-cell",{attrs:{"md-label":"Seguro"}},[e._v(e._s(s.seguro.modalidade.modalidade))]),a("md-table-cell",{attrs:{"md-label":"Seguradora"}},[e._v(e._s(e.getSeguradora(s.seguro.seguradora)))]),a("md-table-cell",{attrs:{"md-label":"Cliente"}},[e._v(e._s(s.cliente.name))]),a("md-table-cell",{attrs:{"md-label":"Tipo"}},[e._v(e._s(s.cliente.role.perfil))]),a("md-table-cell",{attrs:{"md-label":"Preço"}},[e._v(e._s(s.price))]),a("md-table-cell",{attrs:{"md-label":"Data Solicitada"}},[e._v(e._s(e.getData(s.seguro.createdAt)))]),a("md-table-cell",{attrs:{"md-label":"Caducidade"}},[e._v(e._s(e.getData(s.validAt)))]),a("md-table-cell",{class:e.getTextClassColor(s.estado.estadoCode),attrs:{"md-label":"Estado"}},[e._v(e._s(s.estado.estado))]),a("md-table-cell",{attrs:{"md-label":"Detalhes"}},[a("md-button",{staticClass:"md-just-icon md-simple md-success",on:{click:function(t){return e.callSeguroDetalhe(s)}}},[a("md-icon",[e._v("visibility")]),a("md-tooltip",{attrs:{"md-direction":"top"}},[e._v("Ver Detalhes")])],1),a("md-button",{directives:[{name:"show",rawName:"v-show",value:2==s.estado.estadoCode,expression:"item.estado.estadoCode == 2"}],staticClass:"md-just-icon md-simple md-success",on:{click:function(t){return e.deleteSeguroDetalhe(s)}}},[a("md-icon",[e._v("close")]),a("md-tooltip",{attrs:{"md-direction":"top"}},[e._v("Cancelar")])],1)],1)],1)}}]),model:{value:e.searched,callback:function(t){e.searched=t},expression:"searched"}},[a("md-table-toolbar",[a("div",{staticClass:"md-toolbar-section-start"}),a("md-field",{staticClass:"md-toolbar-section-end",attrs:{"md-clearable":""}},[a("md-input",{attrs:{placeholder:"Pesquisar por Seguro..."},on:{input:e.searchOnTable},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1)],1),a("md-table-empty-state",{attrs:{"md-label":"Nenhum Solicitação Encontrada","md-description":"Nenhum utilizador com o nome '"+e.search+"' encontrado. Tenta pesquisar com um nome diferente."}})],1),a("Pagination",{attrs:{total:e.solicitacoes.length,perPage:e.limit,type:"success",value:e.page},on:{input:e.changePage}})],1)},Ta=[],Ba=function(e){return e.toString().toLowerCase()},Ma=function(e,t){return t?e.filter((function(e){return Ba(e.seguro.modalidade.modalidade).includes(Ba(t))})):e},qa={name:"solicitacao-table",components:{Pagination:rt},props:{tableHeaderColor:{type:String,default:""},solicitacoes:Array},data:function(){return{selected:[],search:null,searched:[],textColors:{activo:"activo",pendente:"pendente",renovado:"renovado",caducado:"caducado",cancelado:"cancelado",desativado:"desativado"},limit:5,page:1}},methods:{changePage:function(e){this.page=e;var t=(e-1)*this.limit;this.searched=this.solicitacoes.slice(t,t+this.limit)},getSeguradora:function(e){return e?e.seguradora:"-"},getData:function(e){var t=new Date(e);return"".concat(t.getFullYear(),"-").concat(t.getMonth()+1,"-").concat(t.getDate())},newUser:function(){window.alert("Noop")},searchOnTable:function(){this.searched=Ma(this.solicitacoes,this.search)},changeBloqState:function(e){e.isBloqued=!e.isBloqued},fecthUsers:function(){this.changePage(1)},callSeguroDetalhe:function(e){this.$store.dispatch("solicitacaoStore/setSolicitacao",e),this.$router.push({name:"solicitacoes-detalhe",params:{solicitacaoId:e._id}})},deleteSeguroDetalhe:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return s=t.$loading.show({color:"#4caf50",opacity:.3}),a.prev=1,a.next=4,t.$store.dispatch("solicitacaoStore/cancelarSolicitacao",{_id:e._id,estado:5});case 4:return a.next=6,t.fetchSolicitacoes();case 6:s.hide(),t.$router.push("/solicitacoes"),a.next=14;break;case 10:a.prev=10,a.t0=a["catch"](1),s.hide(),t.notifyVue(status.DANGER,a.t0.message);case 14:case"end":return a.stop()}}),a,null,[[1,10]])})))()},getTextClassColor:function(e){switch(e){case 1:return this.textColors.activo;case 2:return this.textColors.pendente;case 3:return this.textColors.renovado;case 4:return this.textColors.caducado;case 5:return this.textColors.cancelado;case 6:return this.textColors.desativado}},fetchSolicitacoes:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch("solicitacaoStore/getSolicitacoes");case 3:t.next=8;break;case 5:t.prev=5,t.t0=t["catch"](0),e.notifyVue(status.DANGER,t.t0.message);case 8:case"end":return t.stop()}}),t,null,[[0,5]])})))()},notifyVue:function(e,t){this.$notify({message:t,icon:"add_alert",horizontalAlign:"right",verticalAlign:"top",type:e})}},created:function(){this.fecthUsers()}},La=qa,Fa=(a("949b"),Object(h["a"])(La,Na,Ta,!1,null,"d6d2d41e",null)),Ga=Fa.exports,Ha=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content"},[a("div",{staticClass:"md-layout"},[a("md-dialog",{attrs:{"md-active":e.show},on:{"update:mdActive":function(t){e.show=t},"update:md-active":function(t){e.show=t}}},[a("md-dialog-title",[e._v(e._s(e.name))]),a("div",[a("md-table",{scopedSlots:e._u([{key:"md-table-row",fn:function(t){var s=t.item;return a("md-table-row",{attrs:{"md-auto-select":""},on:{click:function(t){return e.downloadItem(s)}}},[a("md-table-cell",{attrs:{"md-label":"Ficheiro"}},[e._v(e._s(s.name))]),a("md-table-cell",{attrs:{"md-label":"Opção"}},[e._v("Download")])],1)}}]),model:{value:e.files,callback:function(t){e.files=t},expression:"files"}})],1),a("md-dialog-actions",[a("md-button",{staticClass:"md-raised md-success",on:{click:e.hideDialog}},[e._v("Fechar")])],1)],1)],1)])},Ka=[],Ja=(a("3ca3"),a("ddb0"),a("2b3d"),{name:"seguro-files",props:{showDialog:{type:Boolean,default:!1},files:Array,name:String},data:function(){return{selected:null}},methods:{downloadItem:function(e){var t=e.url,a=e.name;axios.get(t,{responseType:"blob"}).then((function(e){var t=new Blob([e.data],{type:e.data.type}),s=document.createElement("a");s.href=URL.createObjectURL(t),s.download=a,s.click(),URL.revokeObjectURL(s.href)})).catch(console.error)},hideDialog:function(){this.$emit("hide-dialog")}},computed:{show:function(){return this.showDialog}}}),Wa=Ja,Ya=(a("706d"),Object(h["a"])(Wa,Ha,Ka,!1,null,"202c3966",null)),Za=Ya.exports,Qa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"md-layout"},[a("div",{staticClass:"md-layout-item md-small-size-100 md-size-33"},[a("md-field",[a("label",{attrs:{for:"plano"}},[e._v("Plano")]),a("md-input",{attrs:{type:"text",id:"plano",name:"plano",disabled:""},model:{value:e.seguroViagem.plano,callback:function(t){e.$set(e.seguroViagem,"plano",t)},expression:"seguroViagem.plano"}})],1)],1),a("div",{staticClass:"md-layout-item md-small-size-100 md-size-33"},[a("md-field",[a("label",{attrs:{for:"pessoa"}},[e._v("Pessoas")]),a("md-input",{attrs:{type:"text",id:"pessoa",name:"pessoa",disabled:""},model:{value:e.seguroViagem.pessoas,callback:function(t){e.$set(e.seguroViagem,"pessoas",t)},expression:"seguroViagem.pessoas"}})],1)],1),a("div",{staticClass:"md-layout-item md-small-size-100 md-size-33"},[a("md-field",[a("label",{attrs:{for:"dataPartida"}},[e._v("Data de Partida")]),a("md-input",{attrs:{value:e.getData(e.seguroViagem.dataPartida),type:"text",id:"dataPartida",name:"dataPartida",disabled:""}})],1)],1),a("div",{staticClass:"md-layout-item md-small-size-100 md-size-30"},[a("md-field",[a("label",{attrs:{for:"dataVolta"}},[e._v("Data Volta")]),a("md-input",{attrs:{value:e.getData(e.seguroViagem.dataVolta),type:"text",id:"dataVolta",name:"dataVolta",disabled:""}})],1)],1)])},Xa=[],es={name:"solicitacao-seguro-viagem",props:{seguroViagem:{}},data:function(){return{}},methods:{getData:function(e){var t=new Date(e);return"".concat(t.getFullYear(),"-").concat(t.getMonth()+1,"-").concat(t.getDate())}}},ts=es,as=(a("241b"),Object(h["a"])(ts,Qa,Xa,!1,null,"560dee1a",null)),ss=as.exports,is={components:{EditProfileForm:$t,UserCard:bt},methods:{updateUser:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return s=t.$loading.show({color:"#4caf50",opacity:.3}),a.prev=1,a.next=4,t.$store.dispatch("userStore/updateMe",e);case 4:a.sent,s.hide(),a.next=12;break;case 8:a.prev=8,a.t0=a["catch"](1),s.hide(),t.notifyVue(status.DANGER,a.t0.message);case 12:case"end":return a.stop()}}),a,null,[[1,8]])})))()},notifyVue:function(e,t){this.$notify({message:t,icon:"add_alert",horizontalAlign:"right",verticalAlign:"top",type:e})}},computed:{getUser:function(){return this.$store.getters["userStore/getUser"]},getProfilePhoto:function(){return this.$store.getters["userStore/getProfilePhoto"]}}},os=is,rs=Object(h["a"])(os,ut,mt,!1,null,null,null),ns=rs.exports,cs=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content"},[a("div",{staticClass:"md-layout"},[a("div",{staticClass:"md-layout-item md-medium-size-100 md-xsmall-size-100 md-size-100"},[a("md-card",[a("md-card-header",{attrs:{"data-background-color":"green"}},[a("h4",{staticClass:"title"},[e._v("Solicitações")]),a("p",{staticClass:"category"},[e._v("Solicitações Realizadas")])]),a("md-card-content",[a("solicitacao-table",{attrs:{solicitacoes:e.getSolicitacoes,"table-header-color":"green"}})],1)],1)],1)])])},ls=[],ds={components:{SolicitacaoTable:Ga},methods:{fetchSolicitacoes:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch("solicitacaoStore/getSolicitacoes");case 3:t.next=8;break;case 5:t.prev=5,t.t0=t["catch"](0),e.notifyVue(status.DANGER,t.t0.message);case 8:case"end":return t.stop()}}),t,null,[[0,5]])})))()}},created:function(){var e=this,t=this.$loading.show({color:"#4caf50",opacity:.3});Object(s["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,e.fetchSolicitacoes();case 2:t.hide();case 3:case"end":return a.stop()}}),a)})))()},computed:{getSolicitacoes:function(){return this.$store.getters["solicitacaoStore/getSolicitacoes"]}}},us=ds,ms=Object(h["a"])(us,cs,ls,!1,null,null,null),ps=ms.exports,fs=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper wrapper-full-page"},[a("notifications"),a("div",{staticClass:"page-header login-page header-filter",staticStyle:{"background-size":"cover","background-position":"top center"},style:{"background-image":"url("+e.backgroundImg+")"},attrs:{"filter-color":"black"}}),a("div",{staticClass:"content div-content-center"},[a("div",{staticClass:"md-layout"},[a("div",{staticClass:"md-layout-item md-small-size-90 md-xsmall-size-90 md-medium-size-60 md-size-30 card-center"},[a("login-form",{attrs:{"data-background-color":"green"}})],1)])])],1)},gs=[],hs={data:function(){return{backgroundImg:a("4424")}},components:{LoginForm:It}},vs=hs,bs=(a("454e"),Object(h["a"])(vs,fs,gs,!1,null,"e8cb83ee",null)),ys=bs.exports,Cs=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper wrapper-full-page"},[a("notifications"),a("div",{staticClass:"page-header login-page header-filter",staticStyle:{"background-size":"cover","background-position":"top center"},style:{"background-image":"url("+e.backgroundImg+")"},attrs:{"filter-color":"black"}}),a("div",{staticClass:"content div-content-center"},[a("div",{staticClass:"md-layout",staticStyle:{"overflow-y":"scroll"}},[a("div",{staticClass:"md-layout-item md-small-size-100 md-xsmall-size-100 md-medium-size-60 md-size-40 card-center",staticStyle:{"overflow-y":"hidden"}},[a("sigin-form",{attrs:{"data-background-color":"green"}})],1)])])],1)},_s=[],ws={data:function(){return{backgroundImg:a("4424")}},components:{SiginForm:Ft}},Ss=ws,xs=(a("5e4a"),Object(h["a"])(Ss,Cs,_s,!1,null,"4e85adc1",null)),ks=xs.exports,$s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content",staticStyle:{"padding-top":"0!important"}},[a("div",{staticClass:"md-layout"},[a("div",{staticClass:"md-layout-item md-medium-size-100 md-size-90"},[a("md-card",[a("md-card-header",{attrs:{"data-background-color":"green"}},[a("h4",{staticClass:"title"},[e._v("Utilizadores")]),a("p",{staticClass:"category"},[e._v("Todos utilizadores da Aplicação")])]),a("md-card-content",[a("TableUsers",{attrs:{users:e.getUsers}})],1)],1)],1)])])},As=[],Rs={components:{TableUsers:Qt},methods:{updateUser:function(e){var t=this;Object(s["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,t.$store.dispatch("userStore/updateUser",e);case 3:a.sent,t.fecthUsers(),a.next=10;break;case 7:a.prev=7,a.t0=a["catch"](0),t.notifyVue(status.DANGER,a.t0.message);case 10:case"end":return a.stop()}}),a,null,[[0,7]])})))()}},computed:{getUsers:function(){return this.$store.getters["userStore/getUsers"]}}},Ds=Rs,Ps=Object(h["a"])(Ds,$s,As,!1,null,null,null),Os=Ps.exports,Is=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content"},[e.restrictTo(2)?a("SeguroParticular"):a("SeguroEmpresa")],1)},Vs=[],zs={components:{SeguroParticular:Oa,SeguroEmpresa:ja},data:function(){return{}},methods:{},computed:{restrictTo:function(){return this.$store.getters["userStore/restrictTo"]}}},Us=zs,Es=Object(h["a"])(Us,Is,Vs,!1,null,"4a5b17af",null),js=Es.exports,Ns=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content"},[a("SolicitacaoDetalheFiles",{attrs:{files:e.files,name:e.nameFile,"show-dialog":e.showDialog},on:{"hide-dialog":function(t){return e.hideDialog()}}}),a("div",{staticClass:"md-layout"},[a("div",{staticClass:"md-layout-item md-medium-size-100 md-size-100"},[a("md-card",[a("md-card-header",{attrs:{"data-background-color":"green"}},[a("h4",{staticClass:"title"},[e._v("Detalhes da Solicitação")]),a("p",{staticClass:"category"},[e._v(e._s(e.solicitacao.cliente.role.perfil)+" - "+e._s(e.solicitacao.estado.estado))])]),a("md-card-content",[a("div",{staticClass:"md-layout"},[a("div",{staticClass:"md-layout-item md-small-size-100 md-size-33"},[a("md-field",[a("label",{attrs:{for:"solicitante"}},[e._v("Solicitante")]),a("md-input",{attrs:{type:"text",id:"solicitante",name:"solicitante",disabled:""},model:{value:e.solicitacao.cliente.name,callback:function(t){e.$set(e.solicitacao.cliente,"name",t)},expression:"solicitacao.cliente.name"}})],1)],1),a("div",{staticClass:"md-layout-item md-small-size-100 md-size-33"},[a("md-field",[a("label",{attrs:{for:"mediador"}},[e._v("Mediador")]),a("md-input",{attrs:{type:"text",id:"mediador",name:"mediador",disabled:""}})],1)],1),a("div",{staticClass:"md-layout-item md-small-size-100 md-size-33"},[a("md-field",[a("label",{attrs:{for:"seguradora"}},[e._v("Seguradora")]),a("md-input",{attrs:{type:"text",id:"seguradora",name:"seguradora",disabled:""},model:{value:e.solicitacao.seguro.seguradora.seguradora,callback:function(t){e.$set(e.solicitacao.seguro.seguradora,"seguradora",t)},expression:"solicitacao.seguro.seguradora.seguradora"}})],1)],1),a("div",{staticClass:"md-layout-item md-small-size-100 md-size-33"},[a("md-field",[a("label",{attrs:{for:"seguro"}},[e._v("Seguro")]),a("md-input",{attrs:{type:"text",id:"seguro",name:"seguro",disabled:""},model:{value:e.solicitacao.seguro.modalidade.modalidade,callback:function(t){e.$set(e.solicitacao.seguro.modalidade,"modalidade",t)},expression:"solicitacao.seguro.modalidade.modalidade"}})],1)],1),a("div",{staticClass:"md-layout-item md-small-size-100 md-size-33"},[a("md-field",[a("label",{attrs:{for:"preco"}},[e._v("Preço (AKZ)")]),a("md-input",{attrs:{type:"text",id:"preco",name:"preco",disabled:""},model:{value:e.solicitacao.seguro.price,callback:function(t){e.$set(e.solicitacao.seguro,"price",t)},expression:"solicitacao.seguro.price"}})],1)],1)]),a("SolicitacaoViagemDetalhe",{directives:[{name:"show",rawName:"v-show",value:e.hasPermission(e.solicitacao.cliente.role.perfilCode,0,1,2),expression:"hasPermission(solicitacao.cliente.role.perfilCode, 0, 1, 2)"}],attrs:{"seguro-viagem":e.solicitacao.seguro.seguroViagem}}),a("div",{staticClass:"md-layout"},[a("div",{staticClass:"md-layout-item md-small-size-100 md-size-33"},[a("md-field",{directives:[{name:"show",rawName:"v-show",value:!e.hasFiles(e.solicitacao.seguro.docIdentificacaos),expression:"!hasFiles(solicitacao.seguro.docIdentificacaos)"}]},[a("label",{attrs:{for:"docsIdentificacao"}},[e._v("Anexar Documentos de Identificação")]),a("md-file",{attrs:{name:"docsIdentificacao",id:"docsIdentificacao",multiple:""},on:{change:e.setDocIdentificacaos},model:{value:e.docIdentificacaos,callback:function(t){e.docIdentificacaos=t},expression:"docIdentificacaos"}})],1),a("md-button",{directives:[{name:"show",rawName:"v-show",value:e.hasFiles(e.solicitacao.seguro.docIdentificacaos),expression:"hasFiles(solicitacao.seguro.docIdentificacaos)"}],staticClass:"md-raised md-success",on:{click:function(t){e.callDialog(e.solicitacao.seguro.docIdentificacaos,"Docs de Identificação",e.getFileURL(e.docsType.DOCIDENTICICACAO))}}},[e._v("Ver Docs de Identificação")])],1),a("div",{staticClass:"md-layout-item md-small-size-100 md-size-33"},[a("md-field",{directives:[{name:"show",rawName:"v-show",value:!e.hasFiles(e.solicitacao.seguro.comprovativos),expression:"!hasFiles(solicitacao.seguro.comprovativos)"}]},[a("label",{attrs:{for:"comprovativo"}},[e._v("Anexar Comprovativo")]),a("md-file",{attrs:{name:"comprovativo",id:"comprovativo",multiple:""},on:{change:e.setComprovativos},model:{value:e.comprovativos,callback:function(t){e.comprovativos=t},expression:"comprovativos"}})],1),a("md-button",{directives:[{name:"show",rawName:"v-show",value:e.hasFiles(e.solicitacao.seguro.comprovativos),expression:"hasFiles(solicitacao.seguro.comprovativos)"}],staticClass:"md-raised md-success",on:{click:function(t){e.callDialog(e.solicitacao.seguro.comprovativos,"Comprovativos",e.getFileURL(e.docsType.COMPROVATIVO))}}},[e._v("Ver Comprovativos")])],1),a("div",{staticClass:"md-layout-item md-small-size-100 md-size-33"},[a("md-field",{directives:[{name:"show",rawName:"v-show",value:!e.solicitacao.seguro.apolice&&e.restrictTo(0,1),expression:"!solicitacao.seguro.apolice && restrictTo(0, 1)"}]},[a("label",{attrs:{for:"apolice"}},[e._v("Anexar Apólice")]),a("md-file",{attrs:{name:"apolice",id:"apolice",multiple:""},on:{change:e.setApolice},model:{value:e.apolice,callback:function(t){e.apolice=t},expression:"apolice"}})],1),a("md-button",{directives:[{name:"show",rawName:"v-show",value:e.solicitacao.seguro.apolice,expression:"solicitacao.seguro.apolice"}],staticClass:"md-raised md-success",on:{click:function(t){e.callDialog(e.solicitacao.seguro.apolice,"Apólice de Seguro",e.getFileURL(e.docsType.APOLICE))}}},[e._v("Ver Aplice de Seguro")])],1),a("div",{staticClass:"md-layout-item md-small-size-100 md-size-33"},[a("md-field",{directives:[{name:"show",rawName:"v-show",value:!e.solicitacao.seguro.simulacao&&e.restrictTo(0,1),expression:"!solicitacao.seguro.simulacao && restrictTo(0, 1)"}]},[a("label",{attrs:{for:"simulacao"}},[e._v("Anexar Simulacao")]),a("md-file",{attrs:{name:"simulacao",id:"simulacao"},on:{change:e.setSimulacao},model:{value:e.simulacao,callback:function(t){e.simulacao=t},expression:"simulacao"}})],1),a("md-button",{directives:[{name:"show",rawName:"v-show",value:e.solicitacao.seguro.simulacao,expression:"solicitacao.seguro.simulacao"}],staticClass:"md-raised md-success",on:{click:function(t){e.callDialog(e.solicitacao.seguro.simulacao,"Simulação de Seguro",e.getFileURL(e.docsType.SIMULACAO))}}},[e._v("Ver Simulacao de Seguro")])],1)]),a("div",{staticClass:"md-layout-item md-size-100 text-right"},[a("md-button",{staticClass:"md-raised md-success",on:{click:e.update}},[e._v("Actualizar")])],1)],1)],1)],1)])],1)},Ts=[],Bs=(a("d81d"),{name:"simulacao-detalhe",components:{SolicitacaoViagemDetalhe:ss,SolicitacaoDetalheFiles:Za},props:["solicitacaoId"],data:function(){return{solicitacao:{seguro:{price:null,simulacao:null,apolice:null,comprovativos:[],docIdentificacaos:[],estado:null,tipo:null,modalidade:{modalidade:null},seguradora:{seguradora:null},seguroViagem:{pessoas:1,documentos:[],createdAt:null,plano:null,dataPartida:null,dataVolta:null,seguro:null}},cliente:{name:null,role:{perfil:null,perfilCode:null}},estado:{estado:null,estadoCode:null},validAt:null},seguro:{docIdentificacaos:null,comprovativos:null,apolice:null,simulacao:null},docIdentificacaos:null,comprovativos:null,apolice:null,simulacao:null,files:[],nameFile:"",showDialog:!1,docsType:k}},mounted:function(){this.getSolicitacaoById()},methods:{hasFiles:function(e){return!!Array.isArray(e)&&e.length>0},callDialog:function(e,t,a){e=Array.isArray(e)?e:[e],this.files=e.map((function(e){return{url:"".concat(a).concat(e),name:e}})),this.nameFile=t,this.showDialog=!0},hideDialog:function(){this.showDialog=!1},setComprovativos:function(){this.seguro.comprovativos=this.comprovativos.target.files},setSimulacao:function(){this.seguro.simulacao=this.simulacao.target.files},setDocIdentificacaos:function(){this.seguro.docIdentificacaos=this.docIdentificacaos.target.files},setApolice:function(){this.seguro.apolice=this.apolice.target.files},update:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,s,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=new FormData,s=e.$loading.show({color:"#4caf50",opacity:.3}),a.append("_id",e.solicitacao.seguro._id),e.seguro.comprovativos&&e.seguro.comprovativos.forEach((function(e){a.append("comprovativos",e)})),e.seguro.docIdentificacaos&&e.seguro.docIdentificacaos.forEach((function(e){a.append("docIdentificacaos",e)})),e.seguro.simulacao&&e.seguro.simulacao.forEach((function(e){a.append("simulacao",e)})),e.seguro.apolice&&e.seguro.apolice.forEach((function(e){a.append("apolice",e)})),t.prev=7,t.next=10,e.$store.dispatch("seguroStore/updateSeguro",a);case 10:if(i=t.sent,!i.data.doc.apolice){t.next=14;break}return t.next=14,e.updateSolicitacao({_id:e.solicitacao._id,estado:1});case 14:e.fetchSolicitacoes(),s.hide(),e.$router.push("/solicitacoes"),t.next=23;break;case 19:t.prev=19,t.t0=t["catch"](7),s.hide(),e.notifyVue(status.DANGER,t.t0.message);case 23:case"end":return t.stop()}}),t,null,[[7,19]])})))()},updateSolicitacao:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,t.$store.dispatch("updateSolicitacao",e);case 3:a.next=8;break;case 5:a.prev=5,a.t0=a["catch"](0),t.notifyVue(status.DANGER,a.t0.message);case 8:case"end":return a.stop()}}),a,null,[[0,5]])})))()},getSolicitacaoById:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch("solicitacaoStore/getSolicitacoesById",e.solicitacaoId);case 3:a=t.sent,e.solicitacao=a.data.doc,t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),e.notifyVue(status.DANGER,t.t0.message);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},fetchSolicitacoes:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch("solicitacaoStore/getSolicitacoes");case 3:t.next=8;break;case 5:t.prev=5,t.t0=t["catch"](0),e.notifyVue(status.DANGER,t.t0.message);case 8:case"end":return t.stop()}}),t,null,[[0,5]])})))()},hasPermission:function(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),s=1;s<t;s++)a[s-1]=arguments[s];return a.includes(e)},notifyVue:function(e,t){this.$notify({message:t,icon:"add_alert",horizontalAlign:"right",verticalAlign:"top",type:e})}},computed:{getSolicitacao:function(){return this.$store.getters["userStore/getUsers"]},getSeguroViagem:function(){return this.solicitacao.seguro.seguroViagem},restrictTo:function(){return this.$store.getters["userStore/restrictTo"]},getFileURL:function(){return this.$store.getters["solicitacaoStore/getFileURL"]}}}),Ms=Bs,qs=(a("ec7d"),Object(h["a"])(Ms,Ns,Ts,!1,null,"24678484",null)),Ls=qs.exports,Fs=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content"},[a("div",{staticClass:"md-layout"},[a("div",{staticClass:"md-layout-item md-medium-size-100 md-size-66"},[a("edit-profile-form",{attrs:{"get-user":e.user,"is-my-profile":!1,"is-bloque":!0,title:"Detalhes do Utilizador",description:"Informações Detalhadas do Utilizador","data-background-color":e.getHeadColor(e.user)},on:{"bloque-user":e.updateUser}})],1),a("div",{staticClass:"md-layout-item md-medium-size-100 md-size-33"},[a("user-card",{attrs:{"get-user":e.user,"is-my-profile":!1,"get-profile-photo":""+e.getUserImgUrl+e.user.photo},on:{"update-user":e.updateUser}})],1)])])},Gs=[],Hs={name:"user-detalhe",components:{EditProfileForm:$t,UserCard:bt},props:["userId"],data:function(){return{user:{descricao:null,endereco:[],photo:null,dataNascimento:null,actividade:null,sectorActividade:null,nif:"",isBloqued:!1,secretUser:!1,_id:null,name:"",email:"",role:{modalidades:[],_id:null,perfil:null,perfilCode:null},telemovel:null}}},mounted:function(){this.getSolicitacaoById()},methods:{updateUser:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return s=t.$loading.show({color:"#4caf50",opacity:.3}),console.log(e),a.prev=2,a.next=5,t.$store.dispatch("userStore/updateUser",e);case 5:return a.sent,a.next=8,t.fetchUsers();case 8:s.hide(),t.$router.push("/users"),a.next=16;break;case 12:a.prev=12,a.t0=a["catch"](2),s.hide(),t.notifyVue(status.DANGER,a.t0.message);case 16:case"end":return a.stop()}}),a,null,[[2,12]])})))()},fetchUsers:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch("userStore/getUsers");case 3:t.next=8;break;case 5:t.prev=5,t.t0=t["catch"](0),e.notifyVue(status.DANGER,t.t0.message);case 8:case"end":return t.stop()}}),t,null,[[0,5]])})))()},notifyVue:function(e,t){this.$notify({message:t,icon:"add_alert",horizontalAlign:"right",verticalAlign:"top",type:e})},getSolicitacaoById:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch("userStore/getUserById",e.userId);case 3:a=t.sent,e.user=a.data.doc,t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),e.notifyVue(status.DANGER,t.t0.message);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},getHeadColor:function(e){return e.isBloqued?"orange":"green"}},computed:{getUserImgUrl:function(){return this.$store.getters["userStore/getUserImgUrl"]}}},Ks=Hs,Js=Object(h["a"])(Ks,Fs,Gs,!1,null,null,null),Ws=Js.exports,Ys=[{path:"/signup",name:"signup",component:ks,meta:{allowAnonymous:!0}},{path:"/login",name:"login",component:ys,meta:{allowAnonymous:!0}},{path:"/",component:he,redirect:"/dashboard",children:[{path:"dashboard",name:"Dashboard",component:dt,beforeEnter:function(e,t,a){I.getters["userStore/restrictTo"](0,1)?a():a("solicitacoes")}},{path:"user",name:"User Profile",component:ns},{path:"users",name:"users",component:Os,beforeEnter:function(e,t,a){I.getters["userStore/restrictTo"](0,1)?a():a("solicitacoes")}},{path:"users/:userId",name:"users-detalhe",component:Ws,props:!0,beforeEnter:function(e,t,a){I.getters["userStore/restrictTo"](0)?a():a("solicitacoes")}},{path:"simular-seguro",name:"Simular Seguro",component:js,beforeEnter:function(e,t,a){I.getters["userStore/restrictTo"](2,3)?a():a("solicitacoes")}},{path:"solicitacoes",name:"Solicitações",component:ps},{path:"solicitacoes/:solicitacaoId",name:"solicitacoes-detalhe",component:Ls,props:!0}]}],Zs=Ys,Qs=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:e.closeDropDown,expression:"closeDropDown"}],staticClass:"dropdown",class:{open:e.isOpen},on:{click:e.toggleDropDown}},[e._t("title",[a("a",{staticClass:"dropdown-toggle",attrs:{"data-toggle":"dropdown",href:"javascript:void(0)"}},[a("i",{class:e.icon}),a("p",{staticClass:"notification"},[e._v(" "+e._s(e.title)+" "),a("b",{staticClass:"caret"})])])]),e._t("default")],2)},Xs=[],ei={name:"drop-down",props:{title:String,icon:String},data:function(){return{isOpen:!1}},methods:{toggleDropDown:function(){this.isOpen=!this.isOpen},closeDropDown:function(){this.isOpen=!1}}},ti=ei,ai=Object(h["a"])(ti,Qs,Xs,!1,null,null,null),si=ai.exports,ii={install:function(e){e.component("drop-down",si)}},oi=ii,ri=a("c7db"),ni={install:function(e){e.directive("click-outside",ri["directive"])}},ci=ni,li=(a("c740"),a("a434"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"notifications"},[a("transition-group",{attrs:{name:"list"}},e._l(e.notifications,(function(t){return a("notification",{key:t.timestamp.getTime(),attrs:{message:t.message,icon:t.icon,type:t.type,timestamp:t.timestamp,"vertical-align":t.verticalAlign,"horizontal-align":t.horizontalAlign},on:{"on-close":e.removeNotification}})})),1)],1)}),di=[],ui=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"alert open alert-with-icon",class:[e.verticalAlign,e.horizontalAlign,e.alertType],style:e.customPosition,attrs:{"data-notify":"container",role:"alert","data-notify-position":"top-center"},on:{click:function(t){return e.close()}}},[a("button",{staticClass:"close",attrs:{type:"button","aria-hidden":"true","data-notify":"dismiss"},on:{click:e.close}},[e._v(" × ")]),a("i",{staticClass:"material-icons",attrs:{"data-notify":"icon"}},[e._v(e._s(e.icon))]),a("span",{attrs:{"data-notify":"message"},domProps:{innerHTML:e._s(e.message)}})])},mi=[],pi={name:"notification",props:{message:String,icon:String,verticalAlign:{type:String,default:"top"},horizontalAlign:{type:String,default:"center"},type:{type:String,default:"info"},timeout:{type:Number,default:2500},timestamp:{type:Date,default:function(){return new Date}}},data:function(){return{elmHeight:0}},computed:{hasIcon:function(){return this.icon&&this.icon.length>0},alertType:function(){return"alert-".concat(this.type)},customPosition:function(){var e=this,t=20,a=this.elmHeight+10,s=this.$notifications.state.filter((function(t){return t.horizontalAlign===e.horizontalAlign&&t.verticalAlign===e.verticalAlign&&t.timestamp<=e.timestamp})).length,i=(s-1)*a+t,o={};return"top"===this.verticalAlign?o.top="".concat(i,"px"):o.bottom="".concat(i,"px"),o}},methods:{close:function(){this.$emit("on-close",this.timestamp)}},mounted:function(){this.elmHeight=this.$el.clientHeight,this.timeout&&setTimeout(this.close,this.timeout)}},fi=pi,gi=(a("7b35"),Object(h["a"])(fi,ui,mi,!1,null,"3b98be06",null)),hi=gi.exports,vi={components:{Notification:hi},data:function(){return{notifications:this.$notifications.state}},methods:{removeNotification:function(e){this.$notifications.removeNotification(e)}}},bi=vi,yi=(a("6ae5"),Object(h["a"])(bi,li,di,!1,null,null,null)),Ci=yi.exports,_i={state:[],removeNotification:function(e){var t=this.state.findIndex((function(t){return t.timestamp===e}));-1!==t&&this.state.splice(t,1)},addNotification:function(e){e.timestamp=new Date,e.timestamp.setMilliseconds(e.timestamp.getMilliseconds()+this.state.length),this.state.push(e)},notify:function(e){var t=this;Array.isArray(e)?e.forEach((function(e){t.addNotification(e)})):this.addNotification(e)}},wi={install:function(e){e.mixin({data:function(){return{notificationStore:_i}},methods:{notify:function(e){this.notificationStore.notify(e)}}}),Object.defineProperty(e.prototype,"$notify",{get:function(){return this.$root.notify}}),Object.defineProperty(e.prototype,"$notifications",{get:function(){return this.$root.notificationStore}}),e.component("Notifications",Ci)}},Si=wi,xi=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sidebar",style:e.sidebarStyle,attrs:{"data-color":e.sidebarItemColor,"data-image":e.sidebarBackgroundImage}},[a("div",{staticClass:"logo"},[a("a",{staticClass:"simple-text logo-mini",attrs:{href:"#"}},[a("div",{staticClass:"logo-img"},[a("img",{attrs:{src:e.getProfilePhoto,alt:""}})])]),a("a",{staticClass:"simple-text logo-normal",attrs:{href:"#"}},[e._v(e._s(e.getUserName))])]),a("div",{staticClass:"sidebar-wrapper"},[e._t("content"),a("md-list",{staticClass:"nav"},[e._t("default",e._l(e.sidebarLinks,(function(e,t){return a("sidebar-link",{key:e.name+t,attrs:{to:e.path,link:e}})})))],2)],2)])},ki=[],$i=(a("c975"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("li",{staticClass:"md-list-item"},[a("router-link",e._b({staticClass:"md-list-item-router md-list-item-container md-button-clean",on:{click:e.hideSidebar}},"router-link",e.$attrs,!1),[a("div",{staticClass:"md-list-item-content md-ripple"},[e._t("default",[a("md-icon",[e._v(e._s(e.link.icon))]),a("p",[e._v(e._s(e.link.name))])])],2)])],1)}),Ai=[],Ri={inject:{autoClose:{default:!0}},props:{link:{type:[String,Object],default:function(){return{name:"",path:"",icon:""}}},tag:{type:String,default:"router-link"}},methods:{hideSidebar:function(){this.autoClose&&this.$sidebar&&!0===this.$sidebar.showSidebar&&this.$sidebar.displaySidebar(!1)}}},Di=Ri,Pi=Object(h["a"])(Di,$i,Ai,!1,null,null,null),Oi=Pi.exports,Ii={components:{SidebarLink:Oi},props:{title:{type:String,default:"Vue MD"},sidebarBackgroundImage:{type:String,default:a("9524")},imgLogo:{type:String,default:a("fdbce")},sidebarItemColor:{type:String,default:"green",validator:function(e){var t=["","purple","blue","green","orange","red"];return-1!==t.indexOf(e)}},sidebarLinks:{type:Array,default:function(){return[]}},autoClose:{type:Boolean,default:!0}},provide:function(){return{autoClose:this.autoClose}},computed:{sidebarStyle:function(){return{backgroundImage:"url(".concat(this.sidebarBackgroundImage,")")}},getUser:function(){return this.$store.getters["userStore/getUser"]},getUserName:function(){var e=this.getUser.name.split(" ");return"".concat(e[0]," ").concat(e[e.length-1])},getProfilePhoto:function(){return this.$store.getters["userStore/getProfilePhoto"]}}},Vi=Ii,zi=(a("0efd"),Object(h["a"])(Vi,xi,ki,!1,null,null,null)),Ui=zi.exports,Ei={showSidebar:!1,displaySidebar:function(e){this.showSidebar=e}},ji={install:function(e){e.mixin({data:function(){return{sidebarStore:Ei}}}),Object.defineProperty(e.prototype,"$sidebar",{get:function(){return this.$root.sidebarStore}}),e.component("side-bar",Ui),e.component("sidebar-link",Oi)}},Ni=ji,Ti=a("43f9"),Bi=a.n(Ti),Mi=(a("43f4"),a("9e17"),a("54ba"),{install:function(e){e.use(Ni),e.use(Bi.a)}}),qi=a("ba48"),Li=a.n(qi),Fi=new o["a"]({mode:"history",routes:Zs,linkExactActiveClass:"nav-item active"});i["default"].prototype.$Chartist=Li.a,n.a.defaults.withCredentials=!0,i["default"].use(o["a"]),i["default"].use(l.a,n.a),i["default"].use(Mi),i["default"].use(oi),i["default"].use(ci),i["default"].use(Si),i["default"].use(u.a),window.axios=n.a,Fi.beforeEach(function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t,a,s){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=I.getters["userStore/getIsAuth"],i){e.next=13;break}return e.prev=2,e.next=5,I.dispatch("userStore/isLogged");case 5:t.meta.allowAnonymous&&s("/"),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](2),t.meta.allowAnonymous||s("/login");case 11:e.next=14;break;case 13:t.meta.allowAnonymous&&s("/");case 14:s();case 15:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t,a,s){return e.apply(this,arguments)}}()),new i["default"]({el:"#app",render:function(e){return e(b)},router:Fi,store:I,data:{Chartist:Li.a}})},"5e4a":function(e,t,a){"use strict";var s=a("2c5d"),i=a.n(s);i.a},"64b5":function(e,t,a){},6988:function(e,t,a){"use strict";var s=a("940e"),i=a.n(s);i.a},"6ae5":function(e,t,a){"use strict";var s=a("b5b2"),i=a.n(s);i.a},"706d":function(e,t,a){"use strict";var s=a("8b1a"),i=a.n(s);i.a},"738c":function(e,t,a){},"7b35":function(e,t,a){"use strict";var s=a("4ba2"),i=a.n(s);i.a},"7d3a":function(e,t,a){},"7d6d":function(e,t,a){e.exports=a.p+"img/sidebar-1.23832d31.jpg"},8661:function(e,t,a){"use strict";var s=a("c121"),i=a.n(s);i.a},"87e9":function(e,t,a){"use strict";var s=a("cf2e"),i=a.n(s);i.a},"8b1a":function(e,t,a){},"8fde":function(e,t,a){},"940e":function(e,t,a){},"949b":function(e,t,a){"use strict";var s=a("c9f2"),i=a.n(s);i.a},9524:function(e,t,a){e.exports=a.p+"img/sidebar-2.32103624.jpg"},"9e17":function(e,t,a){},a180:function(e,t,a){e.exports=a.p+"img/marc.aba54d65.jpg"},aeef:function(e,t,a){e.exports=a.p+"img/sidebar-3.3a54f533.jpg"},b51f:function(e,t,a){},b5b2:function(e,t,a){},b5b5:function(e,t,a){},c121:function(e,t,a){},c9f2:function(e,t,a){},cd1f:function(e,t,a){},cf2e:function(e,t,a){},dac3:function(e,t,a){"use strict";var s=a("b51f"),i=a.n(s);i.a},e04d:function(e,t,a){"use strict";var s=a("4d50"),i=a.n(s);i.a},eb9e:function(e,t,a){e.exports=a.p+"img/sidebar-4.3b7e38ed.jpg"},ec7d:function(e,t,a){"use strict";var s=a("b5b5"),i=a.n(s);i.a},fdbce:function(e,t,a){e.exports=a.p+"img/vue-logo.c2a605fb.png"},ff98:function(e,t,a){}});
//# sourceMappingURL=app.06a8c415.js.map